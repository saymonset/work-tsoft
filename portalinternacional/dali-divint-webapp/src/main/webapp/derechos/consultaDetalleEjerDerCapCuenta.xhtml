<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
    xmlns:t="http://myfaces.apache.org/tomahawk">
    
    <ui:composition template="/layoutConsultasHistoricasDerechosCap.xhtml">
		<ui:define name="head">
			<link rel="stylesheet" type="text/css" media="all" href="#{facesContext.externalContext.requestContextPath}/css/derechosText.css" />
		</ui:define>
		<ui:define name="tituloSeccion">
			<h:outputText value="#{etq.divisionInternacional}" />
		</ui:define>
		<ui:define name="subtituloSeccion">
			<h:outputText value="#{etq.derechos}" />
		</ui:define>
		<ui:define name="tituloEncabezado">
			<h:outputText value="#{etq.consultaDerechosPagadosCuenta}" />
		</ui:define>

		<ui:define name="initPantalla">
			<a4j:keepAlive beanName="consultaDetalleEjerDerCapCuenta" />
			<h:outputText value="#{consultaDetalleEjerDerCapCuenta.init}" />
		</ui:define>
    
    	<ui:define name="mensajes">
			<h:panelGroup id="panelMensajes">
				<table width="100%" border="0" cellpadding="0px" cellspacing="5px">
					<tr>
						<td>
							<div style="min-height: 21px;">
								<rich:messages warnClass="warning" infoClass="info"
									errorClass="error" ajaxRendered="true" showDetail="false"
									showSummary="true" layout="list">
									<f:facet name="infoMarker">
										<h:panelGroup>
											<h:graphicImage url="/images/accept.png" />&#160;
		                                </h:panelGroup>
									</f:facet>
									<f:facet name="errorMarker">
										<h:panelGroup>
											<h:graphicImage url="/images/warning.gif" />&#160;
		                                </h:panelGroup>
									</f:facet>
								</rich:messages>
								<div id="divWarnings" class="warning" style="display: none;">
									<p id="textoWarning"></p>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</h:panelGroup>
    	</ui:define>
    
    	<ui:define name="criterios">
    		<h:panelGroup id="panelCriterios">
    			<div id="divCriterios" style="display: inline;">
		    		<table width="100%" border="0" cellpadding="0px" cellspacing="5px">
		    			<tr>
		    				<td class="recuadroTabla" width="50%">
		    					<table class="tablaCriterios" align="center">
		    						<tr>
		    							<td colspan="2">
		    								<h:outputText value="#{etq.institucionMinus}" styleClass="texto"/>
		    							</td>
		    							<td>
		    								<h:outputText value="#{etq.cuentaMinus}" styleClass="texto" />
		    							</td>
		    						</tr>
		    						<tr>
		    							<td>
		    								<h:inputText id="institucion"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.institucion}"
		    									styleClass="textoControles campoNumerico textoMayusculas"
		    									size="7" maxlength="5"
		    									readonly="#{consultaDetalleEjerDerCapCuenta.usuarioExterno}"
		    									tabindex="8"
		    									autocomplete="off">
												<a4j:support actionListener="#{consultaDetalleEjerDerCapCuenta.obtenerInstitucion}"
													event="onchange"
													reRender="nombreInstitucion"
													ajaxSingle="true"/>
		    								</h:inputText>
		    							</td>
		    							<td>
		    								<h:inputText id="nombreInstitucion"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.nombreInstitucion}"
		    									styleClass="textoControles campoAlphaNumerico textoMayusculas"
		    									size="50"
		    									readonly="true"
		    									tabindex="9"
		    									autocomplete="off" />
		    							</td>
		    							<td>
		    								<h:inputText id="cuenta"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.cuenta}"
		    									styleClass="textoControles campoNumerico textoMayusculas"
		    									size="7" maxlength="4"
		    									tabindex="10"
		    									autocomplete="off" />		    								
		    							</td>
		    						</tr>
		    					</table>
		    				</td>
							<td class="recuadroTabla" width="50%">
		    					<table class="tablaCriterios" align="center">
		    						<tr>
		    							<td>
		    								<h:outputText value="#{etq.tv}" styleClass="texto"/>
		    							</td>
		    							<td>
		    								<h:outputText value="#{etq.emisoraMinus}" styleClass="texto"/>
		    							</td>
		    							<td>
		    								<h:outputText value="#{etq.serieMinus}" styleClass="texto"/>
		    							</td>
		    							<td>
		    								<h:outputText value="#{etq.isin}" styleClass="texto"/>
		    							</td>
		    						</tr>
		    						<tr>
		    							<td>
		    								<h:inputText id="tv"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.tv}"
												styleClass="textoControles campoAlphaNumerico textoMayusculas"
												size="7" maxlength="4"
												tabindex="1"
												autocomplete="off" />
		    							</td>
		    							<td>
		    								<h:inputText id="emisora"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.emisora}"
		    									styleClass="textoControles textoMayusculas"
		    									size="7" maxlength="7"
		    									tabindex="2"
		    									autocomplete="off" />
		    							</td>
		    							<td>
		    								<h:inputText id="serie"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.serie}"
		    									styleClass="textoControles textoMayusculas"
		    									size="7" maxlength="6"
		    									tabindex="3"
		    									autocomplete="off" />
		    							</td>
		    							<td>
		    								<h:inputText id="isin"
		    									value="#{consultaDetalleEjerDerCapCuenta.parametros.isin}"
		    									styleClass="textoControles campoAlphaNumerico textoMayusculas"
		    									size="12" maxlength="12"
		    									tabindex="7"
		    									autocomplete="off" />
		    							</td>
		    						</tr>
		    					</table>
		    				</td>
		    			</tr>
		    			<tr>
							<td class="recuadroTabla">
		    					<table class="tablaCriterios" align="center">
		    						<tr>
    									<td align="center">
    										<h:outputText value="#{etq.fechaCorteInicial}" styleClass="texto"/>
    									</td>
    									<td align="center">
    										<h:outputText value="#{etq.fechaCorteFinal}" styleClass="texto"/>
    									</td>
    									<td align="center">
    										<h:outputText value="#{etq.fechaPagoInicial}" styleClass="texto"/>
    									</td>
    									<td align="center">
    										<h:outputText value="#{etq.fechaPagoFinal}" styleClass="texto"/>
    									</td>
		    						</tr>
		    						<tr>
    									<td align="center">
	    									<rich:calendar id="fechaCorteInicial" 
												value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaCorteInicial}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
    									</td>
    									<td align="center">
	    									<rich:calendar id="fechaCorteFinal" 
												value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaCorteFinal}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
    									</td>
    									<td align="center">
	    									<rich:calendar id="fechaPagoInicial" 
												value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaPagoInicial}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
    									</td>
    									<td align="center">
	    									<rich:calendar id="fechaPagoFinal" 
												value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaPagoFinal}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
    									</td>
		    						</tr>
		    					</table>
		    				</td>
		    				<td class="recuadroTabla">
		    					<table class="tablaCriterios" align="center">
		    						<tr>
		    							<td>
		    								<h:outputText value="#{etq.divisaMinus}" styleClass="texto"/>
		    							</td>
		    							<td>
		    								<h:outputText value="#{etq.custodio}" styleClass="texto"/>
		    							</td>
		    							<td>
                                            <h:outputText value="#{etq.estadoDerecho}" styleClass="texto"/>
                                        </td>
		    						</tr>
		    						<tr>
		    							<td>
											<h:selectOneMenu id="divisa"
												value="#{consultaDetalleEjerDerCapCuenta.parametros.idDivisa}"
												styleClass="textoControles"
												tabindex="12">
												<f:selectItem itemValue="-1" itemLabel="Todas" />
												<f:selectItems value="#{consultaDetalleEjerDerCapCuenta.catalogoDivisas}" />
											</h:selectOneMenu>
		    							</td>
		    							<td>
		    								<h:selectOneMenu id="custodio"
												value="#{consultaDetalleEjerDerCapCuenta.parametros.idCustodio}"
												styleClass="textoControles"
												tabindex="14">
												<f:selectItem itemValue="-1" itemLabel="#{etq.seleccionaCustodio}" />
												<f:selectItems value="#{consultaDetalleEjerDerCapCuenta.catalogoCustodios}"/>
											</h:selectOneMenu>
		    							</td>
		    							<td>
                                            <h:selectOneMenu id="estadoDerechoCmb"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.idEstadoDerecho}"
                                                styleClass="textoControles">
                                                <f:selectItem itemValue="-1" itemLabel="#{etq.seleccionarTodos}" />
                                                <f:selectItems value="#{consultaDetalleEjerDerCapCuenta.catalogoEstadoDerecho}"/>
                                            </h:selectOneMenu>
                                        </td>
		    						</tr>
		    					</table>
		    				</td>
		    			</tr>
		    			<tr>
							<td class="recuadroTabla" colspan="2">
		    					<table class="tablaCriterios" align="center">
		    						<tr>
		    							<td>
                                            <h:outputText value="#{etq.proporcionMinus}" styleClass="texto"/>
                                        </td>
                                        <td>
                                            <h:outputText value="#{etq.porcentajeRetencion}" styleClass="texto"/>
                                        </td>
                                        <td>
                                            <h:outputText value="#{etq.fee}" styleClass="texto"/>
                                        </td>
                                        <td>
                                        	<h:outputText value="#{etq.montoBrutoMinus}" styleClass="texto"/>
                                        </td>
                                        <td>
                                        	<h:outputText value="#{etq.montoFee}" styleClass="texto"/>
                                        </td>
                                        <td>
                                        	<h:outputText value="#{etq.impuestoRetenidoMinus}" styleClass="texto"/>
                                        </td>
                                        <td>
                                        	<h:outputText value="#{etq.montoNetoMinus}" styleClass="texto"/>
                                        </td>
                                        <td>
                                            <h:outputText value="#{etq.existenciaFee}" styleClass="texto"/>
                                        </td>
		    						</tr>
		    						<tr>
		    							<td>
                                            <h:inputText id="proporcion"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.proporcion}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="10"
                                                autocomplete="off" />
                                        </td>
                                        <td>
                                            <h:inputText id="porcentajeRetencion"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.porcentajeRetencion}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="6"
                                                autocomplete="off" />
                                        </td>
                                        <td>
                                            <h:inputText id="fee"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.fee}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="10"
                                                autocomplete="off" />
                                        </td>
										<td>
                                            <h:inputText id="montoBruto"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.montoBruto}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="20"
                                                autocomplete="off" />
                                        </td>
										<td>
                                            <h:inputText id="montoFee"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.montoFee}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="20"
                                                autocomplete="off" />
                                        </td>
                                        <td>
                                            <h:inputText id="impuestoRetenido"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.impuestoRetenido}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="20"
                                                autocomplete="off" />
                                        </td>
                                        <td>
                                            <h:inputText id="montoNeto"
                                                value="#{consultaDetalleEjerDerCapCuenta.parametros.montoNeto}"
                                                styleClass="textoControles campoNumericoDecimal"
                                                size="20" maxlength="20"
                                                autocomplete="off" />
                                        </td>
                                        <td>
											<h:selectOneMenu id="tipoFee"
												value="#{consultaDetalleEjerDerCapCuenta.parametros.tipoFee}"
                                                styleClass="textoControles"
												tabindex="20">
												<f:selectItem itemValue="1" itemLabel="AMBOS" />
												<f:selectItems value="#{consultaDetalleEjerDerCapCuenta.opcionesFee}" />
											</h:selectOneMenu>
										</td>
		    						</tr>
		    					</table>
		    				</td>
		    			</tr>
		    		</table>
    			</div>
    			<h:panelGroup id="panelResumenCriterios">
					<div id="divResumen" style="display: none;">
						<table width="100%" border="0" cellpadding="0px" cellspacing="5px">
			    			<tr>
			    				<td class="recuadroTabla" width="50%">
			    					<table class="tablaCriterios" align="center">
			    						<tr>
			    							<td colspan="2">
			    								<h:outputText value="#{etq.institucionMinus}" styleClass="texto"/>
			    							</td>
			    							<td>
			    								<h:outputText value="#{etq.cuentaMinus}" styleClass="texto" />
			    							</td>
			    						</tr>
			    						<tr>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.institucion}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.institucion}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.institucion}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.nombreInstitucion}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.nombreInstitucion}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.nombreInstitucion}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.cuenta}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.cuenta}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.cuenta}"/>
			    							</td>
			    						</tr>
			    					</table>
			    				</td>
								<td class="recuadroTabla" width="50%">
			    					<table class="tablaCriterios" align="center">
			    						<tr>
			    							<td>
			    								<h:outputText value="#{etq.tv}" styleClass="texto"/>
			    							</td>
			    							<td>
			    								<h:outputText value="#{etq.emisoraMinus}" styleClass="texto"/>
			    							</td>
			    							<td>
			    								<h:outputText value="#{etq.serieMinus}" styleClass="texto"/>
			    							</td>
			    							<td>
			    								<h:outputText value="#{etq.isin}" styleClass="texto"/>
			    							</td>
			    						</tr>
			    						<tr>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.tv}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.tv}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.tv}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.emisora}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.emisora}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.emisora}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.serie}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.serie}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.serie}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.isin}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.isin}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.isin}"/>
			    							</td>
			    						</tr>
			    					</table>
			    				</td>
			    			</tr>
			    			<tr>
								<td class="recuadroTabla">
			    					<table class="tablaCriterios" align="center">
			    						<tr>
	    									<td align="center">
	    										<h:outputText value="#{etq.fechaCorteInicial}" styleClass="texto"/>
	    									</td>
	    									<td align="center">
	    										<h:outputText value="#{etq.fechaCorteFinal}" styleClass="texto"/>
	    									</td>
	    									<td align="center">
	    										<h:outputText value="#{etq.fechaPagoInicial}" styleClass="texto"/>
	    									</td>
	    									<td align="center">
	    										<h:outputText value="#{etq.fechaPagoFinal}" styleClass="texto"/>
	    									</td>
			    						</tr>
			    						<tr>
	    									<td align="center">
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaCorteInicial}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.fechaCorteInicial}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.fechaCorteInicial}"/>
	    									</td>
	    									<td align="center">
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaCorteFinal}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.fechaCorteFinal}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.fechaCorteFinal}"/>
	    									</td>
	    									<td align="center">
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaPagoInicial}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.fechaPagoInicial}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.fechaPagoInicial}"/>
	    									</td>
	    									<td align="center">
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.fechaPagoFinal}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.fechaPagoFinal}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todasMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.fechaPagoFinal}"/>
	    									</td>
			    						</tr>
			    					</table>
			    				</td>
			    				<td class="recuadroTabla">
			    					<table class="tablaCriterios" align="center">
			    						<tr>
			    							<td>
			    								<h:outputText value="#{etq.divisaMinus}" styleClass="texto"/>
			    							</td>
			    							<td>
			    								<h:outputText value="#{etq.custodio}" styleClass="texto"/>
			    							</td>
			    							<td>
                                                <h:outputText value="#{etq.estadoDerecho}" styleClass="texto"/>
                                            </td>                                            
			    						</tr>
			    						<tr>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.divisa}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.divisa}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.divisa}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.custodio}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.custodio}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.custodio}"/>
			    							</td>
			    							<td>
                                                <h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.estadoDerecho}"
                                                    rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.idEstadoDerecho}"/>
                                                <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
                                                    rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.idEstadoDerecho}"/>
                                            </td>
			    						</tr>
			    					</table>
			    				</td>
			    			</tr>
			    			<tr>
								<td class="recuadroTabla" colspan="2">
			    					<table class="tablaCriterios" align="center">
			    						<tr>
			    							<td>
	                                            <h:outputText value="#{etq.proporcionMinus}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                            <h:outputText value="#{etq.porcentajeRetencion}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                            <h:outputText value="#{etq.fee}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                        	<h:outputText value="#{etq.montoBrutoMinus}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                        	<h:outputText value="#{etq.montoFee}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                        	<h:outputText value="#{etq.impuestoRetenidoMinus}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                        	<h:outputText value="#{etq.montoNetoMinus}" styleClass="texto"/>
	                                        </td>
	                                        <td>
	                                            <h:outputText value="#{etq.existenciaFee}" styleClass="texto"/>
	                                        </td>
			    						</tr>
			    						<tr>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.proporcion}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.proporcion}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.proporcion}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.porcentajeRetencion}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.porcentajeRetencion}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.porcentajeRetencion}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.fee}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.fee}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.fee}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.montoBruto}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.montoBruto}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.montoBruto}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.montoFee}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.montoFee}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.montoFee}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.impuestoRetenido}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.impuestoRetenido}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.impuestoRetenido}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.parametros.montoNeto}"
													rendered="#{!empty consultaDetalleEjerDerCapCuenta.parametros.montoNeto}"/>
		                                        <h:outputText styleClass="texto" value="#{etq.todosMayusculas}"
		                                        	rendered="#{empty consultaDetalleEjerDerCapCuenta.parametros.montoNeto}"/>
			    							</td>
			    							<td>
												<h:outputText styleClass="texto" value="#{consultaDetalleEjerDerCapCuenta.feeSeleccionado}"/>
			    							</td>
			    						</tr>
			    					</table>
			    				</td>
			    			</tr>
			    		</table>
					</div>
				</h:panelGroup>
    		</h:panelGroup>
    	</ui:define>
    
    	<ui:define name="seccionContenido">
    		<h:panelGroup id="panelContenido">
				<h:panelGroup rendered="#{consultaDetalleEjerDerCapCuenta.consultaEjecutada and not consultaDetalleEjerDerCapCuenta.consultaConResultados}">
					<table width="100%" border="0" cellpadding="0px" cellspacing="0px">
						<tr>
							<td class="tituloTabla" width="100%">
		                    	<h:outputText value="#{etq.sinResultados}" /> 
							</td>
						</tr>
					</table>
				</h:panelGroup>
				
    			<h:panelGroup rendered="#{consultaDetalleEjerDerCapCuenta.consultaEjecutada and consultaDetalleEjerDerCapCuenta.consultaConResultados}">
					<h:panelGroup id="panelPaginacion">
						<table width="100%" border="0" cellpadding="0px" cellspacing="0px">
							<tr>
								<td align="left" class="textoEstadoCuenta">
									<a4j:commandLink id="control_bitacora_primero"
										action="#{consultaDetalleEjerDerCapCuenta.irPrimeraPagina}"
										rendered="#{consultaDetalleEjerDerCapCuenta.irAlPrimero}"
										reRender="panelContenido">
										<img src="#{facesContext.externalContext.requestContextPath}/images/control_primero.png" border="0" />
									</a4j:commandLink>
									<a4j:commandLink id="control_bitacora_atras_fast"
										action="#{consultaDetalleEjerDerCapCuenta.retrocederPaginasRapido}"
										rendered="#{consultaDetalleEjerDerCapCuenta.retrocederRapido}"
										reRender="panelContenido">
										<img src="#{facesContext.externalContext.requestContextPath}/images/control_atras_fast.png" border="0" />
									</a4j:commandLink>
									<a4j:commandLink id="control_bitacora_atras"
										action="#{consultaDetalleEjerDerCapCuenta.retrocederPagina}"
										rendered="#{consultaDetalleEjerDerCapCuenta.retroceder}"
										reRender="panelContenido">
										<img src="#{facesContext.externalContext.requestContextPath}/images/control_atras.png" border="0" />
									</a4j:commandLink>
									<a4j:commandLink id="control_bitacora_adelante"
										action="#{consultaDetalleEjerDerCapCuenta.avanzarPagina}"
										rendered="#{consultaDetalleEjerDerCapCuenta.avanzar}"
										reRender="panelContenido">
										<img src="#{facesContext.externalContext.requestContextPath}/images/control_adelante.png" border="0" />
									</a4j:commandLink>
									<a4j:commandLink id="control_bitacora_adelante_fast"
										action="#{consultaDetalleEjerDerCapCuenta.avanzarPaginasRapido}"
										rendered="#{consultaDetalleEjerDerCapCuenta.avanzarRapido}"
										reRender="panelContenido">
										<img src="#{facesContext.externalContext.requestContextPath}/images/control_adelante_fast.png" border="0" />
									</a4j:commandLink>
									<a4j:commandLink id="control_bitacora_ultimo"
										action="#{consultaDetalleEjerDerCapCuenta.irUltimaPagina}"
										rendered="#{consultaDetalleEjerDerCapCuenta.irAlUltimo}"
										reRender="panelContenido">
										<img src="#{facesContext.externalContext.requestContextPath}/images/control_ultimo.png" border="0" />
									</a4j:commandLink>
									<br />
									<h:outputText value="#{etq.mostrando}" styleClass="textoResumen" />
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.numeroPagina}" styleClass="textoResumen" />
									<h:outputText value="#{etq.de}" styleClass="textoResumen" />
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.totalPaginas}" styleClass="textoResumen" />
									<h:outputText value="#{etq.cierre}" styleClass="textoResumen" />
									&#160;&#160;&#160;
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.paginaVO.totalRegistros}" styleClass="textoResumen" converter="formatoEnteroConverter" />
									&#160;
									<h:outputText styleClass="textoResumen" value="#{etq.registrosEncontrados}" />
								</td>
								<td style="text-align: right;"  class="textoEstadoCuenta">
									<h:outputText escape="false" value="#{etq.registrosPorPagina}" styleClass="textoResumen" />
									<h:selectOneMenu id="tamanioPagina" styleClass="textoResumen"
										value="#{consultaDetalleEjerDerCapCuenta.paginaVO.registrosXPag}">
										<f:selectItem itemLabel="1" itemValue="1" />
										<f:selectItem itemLabel="2" itemValue="2" />
										<f:selectItem itemLabel="5" itemValue="5" />
										<f:selectItem itemLabel="10" itemValue="10" />
										<f:selectItem itemLabel="20" itemValue="20" />
										<f:selectItem itemLabel="50" itemValue="50" />
										<a4j:support event="onchange" reRender="panelContenido" actionListener="#{consultaDetalleEjerDerCapCuenta.paginarResultados}" />
									</h:selectOneMenu>
								</td>
							</tr>
						</table>
					</h:panelGroup>
					<!-- Se realizá modificación -->
					<h:panelGroup id="panelResultados">
						<table width="100%" border="0" cellpadding="0px" cellspacing="0px">
							<tr>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.institucionMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.cuentaMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
                                    <h:outputText value="#{etq.tipoDerecho}" />
                                </th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.tipoValorMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.emisoraMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.serieMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.isin}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.custodio}" />
								</th>
								<th class="tituloTabla wordWrap">
								 	<h:outputText value="#{etq.fechaCorteMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.fechaPago}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.porcentajeRetencion}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.cantidadTit}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.proporcionMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.fee}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.divisaMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.montoBrutoMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.montoFee}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.impuestoRetenidoMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.montoNetoMinus}" />
								</th>
								<th class="tituloTabla wordWrap">
									<h:outputText value="#{etq.estado}" />
								</th>
							</tr>
							<t:dataList value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.resultadosConsulta}"
								var="registro" rowIndexVar="indice">
								<tr>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" >
										<h:outputText value="#{registro.idFolioInstitucion}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado">
										<h:outputText value="#{registro.cuenta}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado">
                                        <h:outputText value="#{registro.tipoDerecho}" />
                                    </td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" >
										<h:outputText value="#{registro.tipoValor}"  />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado">
										<h:outputText value="#{registro.emisora}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado">
										<h:outputText value="#{registro.serie}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado">
										<h:outputText value="#{registro.isin}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado">
										<h:outputText value="#{registro.custodio}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.fechaCorte}"/>
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.fechaPago}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.porcentajeRetencion}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.asignacion}">
											<f:convertNumber pattern="###,###,###,###,###,###" />
										</h:outputText>
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.proporcion}" converter="formatoDecimalLargoConverter" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.fee}" converter="formatoDecimalLargoConverter" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.divisa}" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.montoBruto}"
											converter="formatoMonedaConverter" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.montoFee}"
											converter="formatoMonedaConverter" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.impuestoRetenido}"
											converter="formatoMonedaConverter" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.montoNeto}"
											converter="formatoMonedaConverter" />
									</td>
									<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}  centrado">
										<h:outputText value="#{registro.estadoDerecho}" />
									</td>
								</tr>
							</t:dataList>
							<tr>
								<td class="tituloTabla wordWrap" colspan="2">
									<h:outputText value="#{etq.subtotal}" />
								</td>
								<td class="tituloTabla wordWrap" colspan="9" >
									&nbsp;
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.subtotalAsignacion}" >
										<f:convertNumber pattern="###,###,###,###,###,###" />
									</h:outputText>
								</td>
								<td class="tituloTabla wordWrap" colspan="3">
									&nbsp;
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.subtotalMontoBruto}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.subtotalMontoFee}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.subtotalImpuestoRetenido}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.subtotalMontoNeto}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									&nbsp;
								</td>
							</tr>
							
							<t:dataList value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.totalesPorcentajeRetencion}"
								var="registro" rowIndexVar="indice">
								<tr>
									<td class="renglonTablaDos wordWrap" colspan="2" align="center">
										<h:outputText value="#{etq.subtotal} #{registro.porcentajeRetencionReal} #{etq.porcentaje}" />
									</td>
									<td class="renglonTablaDos wordWrap" colspan="9" >
										&nbsp;
									</td>
									<td class="renglonTablaDos wordWrap" align="center">
										<h:outputText value="#{registro.asignacion}" >
											<f:convertNumber pattern="###,###,###,###,###,###" />
										</h:outputText>
									</td>
									<td class="renglonTablaDos wordWrap" colspan="3">
										&nbsp;
									</td>
									<td class="renglonTablaDos wordWrap" align="center">
										<h:outputText value="#{registro.montoBruto}" converter="formatoMonedaConverter" />
									</td>
									<td class="renglonTablaDos wordWrap" align="center">
										<h:outputText value="#{registro.montoFee}" converter="formatoMonedaConverter" />
									</td>
									<td class="renglonTablaDos wordWrap" align="center">
										<h:outputText value="#{registro.impuestoRetenido}" converter="formatoMonedaConverter" />
									</td>
									<td class="renglonTablaDos wordWrap" align="center">
										<h:outputText value="#{registro.montoNeto}" converter="formatoMonedaConverter" />
									</td>
									<td class="renglonTablaDos wordWrap">
										&nbsp;
									</td>
								</tr>
							</t:dataList>
							<tr>
								<td class="tituloTabla wordWrap" colspan="2" >
									<h:outputText value="#{etq.totalMinus}" />
								</td>
								<td class="tituloTabla wordWrap" colspan="9" >
									&nbsp;
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.totalAsignacion}" >
										<f:convertNumber pattern="###,###,###,###,###,###" />
									</h:outputText>
								</td>
								<td class="tituloTabla wordWrap" colspan="3">
									&nbsp;
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.totalMontoBruto}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.totalMontoFee}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.totalImpuestoRetenido}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									<h:outputText value="#{consultaDetalleEjerDerCapCuenta.resultadosConsulta.totalMontoNeto}"
										converter="formatoMonedaConverter" />
								</td>
								<td class="tituloTabla wordWrap">
									&nbsp;
								</td>
							</tr>
						</table>
						<br />
						<table width="100%" border="0" cellpadding="0px" cellspacing="0px">
							<tr>
								<td align="right" width="100%">
				                    <h:commandButton actionListener="#{consultaDetalleEjerDerCapCuentaExportacion.generarExportacionPDF}"
										action="consultaDetalleEjerDerCapCuentaPDF"
										image="/images/pdf.gif"
										title="Exportar a PDF todos los resultados de la consulta"
										id="generarPdf" 
										onclick="bloquearBotonesReportes(['generarXls', 'generarPdf']);"/>
									&#160;&#160;
			                        <h:commandButton actionListener="#{consultaDetalleEjerDerCapCuentaExportacion.generarExportacionXLS}"
										action="consultaDetalleEjerDerCapCuentaXLS"
										image="/images/excel-file.gif"
										title="Exportar a XLS todos los resultados de la consulta"
										id="generarXls" 
										onclick="bloquearBotonesReportes(['generarXls', 'generarPdf']);"/>
									&#160;
									<div id="monitorPeticionReporte" style="display: none;">
									<h:panelGroup id="panelMonitorPeticionReporte">
									<h:graphicImage value="/images/ajax-loader.gif" />
									&#160;&#160;
									<h:outputText value="#{etq.reporteEnProceso}" />
									<a4j:commandButton id="btnActualizarEstadoPeticion"
										image="/images/transparent.gif"
										styleClass="submit"
										actionListener="#{consultaDetalleEjerDerCapCuentaExportacion.actualizarEstadoPeticion}"
										reRender="panelMonitorPeticionReporte"
										oncomplete="desbloquearBotonesReportes(#{consultaDetalleEjerDerCapCuentaExportacion.peticionReporteCompleta}, ['generarXls', 'generarPdf']);"/>
									</h:panelGroup>
								</div>
								</td>
							</tr>
						</table>
					</h:panelGroup>
				</h:panelGroup>
    		</h:panelGroup>
    	</ui:define>
		<ui:define name="botones">
			<h:panelGroup id="panelBotones">			
				<div class="refrescar" style="float: left;">
	        		 <a4j:status id="commonStatus">
						<f:facet name="start">
							<h:panelGroup>
								<h:graphicImage value="/images/ajax-loader.gif" />
								<h:outputText value="#{etq.buscando}" />
							</h:panelGroup>
						</f:facet>
					</a4j:status> 	
	        	</div>
	        	<div class="limpiar">
					<h:commandButton id="botonLimpiar" image="/images/transparent.gif"
						styleClass="submit"
						actionListener="#{consultaDetalleEjerDerCapCuenta.limpiar}"/>
				</div>
				<div class="buscar">
					<a4j:commandButton id="botonBuscar" image="/images/transparent.gif"
						styleClass="submit"
						actionListener="#{consultaDetalleEjerDerCapCuenta.consultar}"
						reRender="panelMensajes, panelResumenCriterios, panelContenido"
						oncomplete="mostrarResumenCriteriosBusqueda();" />
				</div>
				<div id="botonEditarCriterios" class="editar" style="display: none; float:right;" >            
	            	<input type="image" class="submit"
						src="#{facesContext.externalContext.requestContextPath}/images/transparent.gif"
						alt="Editar Criterios"
						title="Editar Criterios"
						onclick="mostrarCriteriosBusqueda();return false;" />                      	
	           	</div>  
	        	
			</h:panelGroup>
           	<h:panelGroup>           		
				<ol style="font-size:9px; color:#498FED; font-weight: bold" >          		
					<li>
						<h:outputText 
						value="Si no se captura ninguna fecha, se tomaran los útimos 90 días respecto a la actual en la Fecha Pago."
						style="font-size:9px; color:#498FED; font-weight: bold" />
					</li>
					<li>
						<h:outputText 
						value="Si se captura solo una fecha inicial, se tomaran los siguientes 90 días respecto a la fecha proporcionada."
						style="font-size:9px; color:#498FED; font-weight: bold" />
					</li>
					<li>
						<h:outputText 
						value="Si se captura solo una fecha final, se tomaran los 90 días anteriores respecto a la fecha proporcionada."
						style="font-size:9px; color:#498FED; font-weight: bold" />
					</li>
				</ol>
			</h:panelGroup>
		</ui:define>
    </ui:composition>
</html>