<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:t="http://myfaces.apache.org/tomahawk">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" type="text/css" media="all"
			href="#{facesContext.externalContext.requestContextPath}/css/dali.css" />
		<link rel="stylesheet" type="text/css" media="all"
			href="#{facesContext.externalContext.requestContextPath}/css/menuie7.css" />
		<!--[if IE 6]>
		<link rel="stylesheet" type="text/css" media="all"
			href="#{facesContext.externalContext.requestContextPath}/css/menu.css" />
		<![endif]-->
	    <link type="text/css" href="#{facesContext.externalContext.requestContextPath}/js/jquery/css/jquery-ui-1.8.23.custom.css" rel="stylesheet" />
		<script language="javascript" type="text/javascript"
					src="#{facesContext.externalContext.requestContextPath}/js/shortcut.js">
		</script>
		<script language="javascript" type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/jquery/js/jquery-1.8.0.min.js"></script>
		<script language="javascript" type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/jquery/js/jqueryUi.js"></script>	
		
		<script language="javascript" >
		shortcut.add("Ctrl+Space",function(event) {
			var elem = event.target || event.srcElement;
			elem.className = elem.className + ' suggest';
		},
		{
			
		});
		</script>
		<script language="javascript">
			contextPath = '#{facesContext.externalContext.requestContextPath}';
			var $j = jQuery.noConflict();
		</script>

		<script language="javascript" type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/c_config.js"></script>
		<script language="javascript" type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/c_smartmenus.js"></script>
		<script language="javascript" type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/c_addon_position_fixed.js"></script>		
		
		<script type="text/javascript"
			src="#{facesContext.externalContext.requestContextPath}/js/detalleLiquidacionPaquetes.js"/>
	</head>
	<body>
	<f:view >
		<a4j:keepAlive beanName="detalleLiquidacionPaquetes" />
		<div id="mainContainer_popUp">
			<div id="contenido_pag" >
	           	<div class="seccion texto" style="overflow: auto;">
		           	<a4j:outputPanel ajaxRendered="true">
			           	<table width="900px" cellpadding="0px" cellspacing="0px">
							<tr>
								<td>
									<div style="min-height: 21px;">
										<div id="divWarningsPopUp" class="warning" style="display:none;">
											<p id="textoWarningPopUp">
												<h:outputText value="#{detalleLiquidacionPaquetes.mensaje}" id="mensaje"/>
											</p>
										</div>
									</div>
								</td>
							</tr>
						</table>
	           		</a4j:outputPanel>
	                <h:outputText value="#{detalleLiquidacionPaquetes.init}"></h:outputText>
		            <table width="100%" border="0" cellpadding="0px" cellspacing="5px">
						<tr>
							<td  class="recuadroTabla">
								<table class="tablaCriterios" >
									<tr>
										<td>
											&#160;
										</td>
										<td  align="center">
											<b><h:outputText styleClass="texto" value="#{etq.foliopaquete}"/></b>
										</td>
										<td align="center">
											<b><h:outputText styleClass="texto" value="#{etq.numTraspasos}"/></b>
										</td>
									</tr>
									<tr>
										<td>
											&#160;
										</td>
										<td title="#{detalleLiquidacionPaquetes.paquete.folioPaquete}" align="center" >
										 	<h:outputText styleClass="textoResumen" value="#{detalleLiquidacionPaquetes.paquete.folioPaquete}"/>
										</td>
										<td align="center" title="#{detalleLiquidacionPaquetes.paquete.numTraspasos}" >
											<h:outputText styleClass="textoResumen" value="#{detalleLiquidacionPaquetes.paquete.totalOperacionesPaquete}"/>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
					<div class="clear"> </div>
	                <a4j:outputPanel ajaxRendered="true">
					<h:form>
					<a4j:outputPanel ajaxRendered="true" rendered="#{empty detalleLiquidacionPaquetes.paquete.instruccionLiquidaciones}">
					<t:dataTable id="noExistenResultados" 
						value="#{detalleLiquidacionPaquetes.paquete.instruccionLiquidaciones}" 
						var="operacion" styleClass="tablaGeneral" headerClass="tituloTabla" width="100%" footerClass="tituloTabla"
						border="0" cellpadding="3px" cellspacing="0px" columnClasses="everyColumn"
						rowClasses="renglonTablaUno, renglonTablaDos">
						<t:column>
							<f:facet name="header" >
								<h:outputText value="#{detalleLiquidacionPaquetes.mensaje}" id="mensajeSinResultados"/>
							</f:facet>
						</t:column>
					</t:dataTable>
					</a4j:outputPanel>
					<a4j:outputPanel ajaxRendered="true" rendered="#{!(empty detalleLiquidacionPaquetes.paquete.instruccionLiquidaciones)}">
	                <table border="0" class="tablaGeneral" width="100%" cellspacing="0px" >
				        <tr>
				            <th class="tituloTabla"><h:outputText value="#{etq.numeroOperacion}"/></th>
				            <th class="tituloTabla"><h:outputText value="#{etq.folio}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.folioUsuario}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.traspasante}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.receptor}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.emisorTraspasante}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.emisorReceptor}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.tv}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.emisora}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.serie}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.cupon}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.cantidad}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.importe}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.estatus}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.fechaLiquidacion}"/></th>
							<th class="tituloTabla"><h:outputText value="#{etq.cancelarLiquidacion}"/></th>
				        </tr>
	
				        <t:dataList value ="#{detalleLiquidacionPaquetes.paquete.instruccionLiquidaciones}"
				            var="operacion" rowIndexVar="indice"  >
					        <tr>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					               	<h:outputText value="#{operacion.numeroOperacion}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					               	<h:outputText value="#{operacion.folio}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText value="#{operacion.folioUsuario}"/>
					            </td>
								<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
									<h:outputText value="#{operacion.traspasante}"/>
								</td>
								<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText  value="#{operacion.receptor}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
									<h:outputText value="#{operacion.emisorTraspasante}"/>
								</td>
								<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText  value="#{operacion.emisorReceptor}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
									<h:outputText value="#{operacion.tv}" />
								</td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText value="#{operacion.emisora}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText value="#{operacion.serie}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText value="#{operacion.cupon}"/> 
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText value="#{operacion.cantidad}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
					            	<h:outputText  value="#{operacion.importe}"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
									<h:outputText value="#{operacion.estatus}" />
								</td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="right">
					            	<h:outputText value="#{operacion.fechaLiquidacion}"  converter="formatoFechaCortoConverter"/>
					            </td>
					            <td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}" align="center">
									<a4j:commandLink actionListener="#{detalleLiquidacionPaquetes.cancelarInstruccionLiquidacion}" 
										onclick="deshabilitarLinkCancelar(this)"
					               		id="cancelarInstruccion" oncomplete="validarResultados(this)" rendered="#{operacion.cancelada}"
					               		eventsQueue="evqu" ignoreDupResponses="true" requestDelay="#{inicioSesionBean.delay}">
										<h:graphicImage value="/images/cancel.png"
											title="#{etq.cancelarLiquidacion}"/>
										<f:attribute name="referenciaPaquete" value="#{detalleLiquidacionPaquetes.paquete.referenciaPaquete}" />
										<f:attribute name="totalOperacionesPaquete" value="#{detalleLiquidacionPaquetes.paquete.totalOperacionesPaquete}" />
										<f:attribute name="numeroOperacionPaquete" value="#{detalleLiquidacionPaquetes.paquete.numeroOperacionPaquete}" />
										<f:attribute name="totalTitulosPaquete" value="#{detalleLiquidacionPaquetes.paquete.totalTitulosPaquete}" />
										<f:attribute name="totalImportePaquete" value="#{detalleLiquidacionPaquetes.paquete.totalImportePaquete}" />
										<f:attribute name="idInstruccion" value="#{operacion.idInstruccion}" />
										<f:attribute name="cancelada" value="#{operacion.cancelada}" />
									</a4j:commandLink>
					            </td>
					        </tr>
				        </t:dataList>
				    </table>
				    </a4j:outputPanel>
					</h:form>
					</a4j:outputPanel>
				</div>    
	        </div>
		</div>
		</f:view>
	</body>
</html>
