<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:indeval="http://indeval.com/indeval"
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<ui:composition template="/layoutConsultas.xhtml">
		<ui:define name="titulo">
			<h:outputText value="#{etq.estatusOp}" />
		</ui:define>
		<ui:define name="head">
			<script language="javascript" type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/opEfectivo.js" />
			<script language="javascript" type="text/javascript">
				function envia(recibe){
					if (recibe==1){//Si es Mexican Peso
						window.location='#{facesContext.externalContext.requestContextPath}/efectivo/estatusOpEfectivo.faces';
					}
					else{
						window.location='#{facesContext.externalContext.requestContextPath}/efectivo/estatusOpEfectivoDivIntl.faces?clave='+recibe;
					} 
				}
			</script>
			
			<script language="javascript" type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/mostrarFirmaDigital.js"></script>
		</ui:define>
		
		<ui:define name="tituloSeccion">
			<h:outputText value="#{etq.estatusOp}" />
		</ui:define>
		<ui:define name="subtituloSeccion">
			<h:outputText value="#{etq.operacionesEfectivo}" />
		</ui:define>
		<ui:define name="mensajeUsuario">			 
		</ui:define>
		
		
		<ui:define name="criterios">
		
			<a4j:keepAlive beanName="estatusOpEfectivoBean" />
			<h:panelGroup id="panelCriterios">
				<h:outputText value="#{estatusOpEfectivoBean.init}" />
				<h:inputHidden value="#{estatusOpEfectivoBean.consultaEjecutada}"></h:inputHidden>
				<h:inputHidden id="matchIdOperacionesConfirmar"/>
				<h:inputHidden id="matchIdOperacionesCancelar" />
				<h:inputHidden id="intlIdOperacionesLiberar"/>
				<h:inputHidden id="intlIdOperacionesAprobar" />
				<h:inputHidden id="validationErrors" value="#{estatusOpEfectivoBean.validationErrors}"></h:inputHidden>
				<h:inputHidden id="esTipo" value="#{estatusOpEfectivoBean.esTipo}"></h:inputHidden>
				<h:inputHidden id="idInstruccion" value="#{estatusOpEfectivoBean.idInstruccion}"></h:inputHidden>
				<h:inputHidden id="idsAutorizar" value="#{estatusOpEfectivoBean.idsAutorizar}"/>
				<h:inputHidden id="idsLiberar" value="#{estatusOpEfectivoBean.idsLiberar}"/>
				<h:inputHidden id="checkAllAutorizaEnabled" value="#{estatusOpEfectivoBean.checkAllAutorizaEnabled}"/>
                <h:inputHidden id="checkAllLiberaEnabled" value="#{estatusOpEfectivoBean.checkAllLiberaEnabled}"/>
				
				<div
					style='display: #{ estatusOpEfectivoBean.consultaEjecutada ? "none" : "inline"}'
					id="divCriterios">
					<table width="100%" border="0" cellpadding="6px" cellspacing="6px">
						<tr>
							<td class="recuadroTabla">
								<table class="tablaCriterios" border="0" width="100%"
									style="text-align: left">
									<tr>
									<td colspan="2">
											<h:outputText styleClass="texto"
												value="#{etq.divisa}" />
										</td>
										<td>
											<h:outputText styleClass="texto"
												value="#{etq.participanteMinus}" />
										</td>
										<td >
											<h:outputText styleClass="texto"
												value="#{etq.contraparteMinus}" />
										</td>
										<td align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaLiq}" />
										</td>
										<td >
											<h:outputText styleClass="texto" value="#{etq.rolMinus}" />
										</td>
										<td >
											<h:outputText styleClass="texto" value="#{etq.estatus}" />
										</td>
										<td >
											<h:outputText styleClass="texto" value="#{etq.referenciaOperacion}" />
										</td>
										 
									</tr> 
									<tr>
									<td colspan="2">											
											<h:selectOneMenu id="selectDivisa"
												styleClass="textoControles"
												value="#{estatusOpEfectivoBean.criterio.divisa.id}">
												<f:selectItem itemLabel="TODAS" itemValue="-1" />
												<f:selectItems
													value="#{estatusOpEfectivoBean.divisasItems}" />
											</h:selectOneMenu>
											<a4j:support event="onchange"
													actionListener="#{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro"  />
										</td>
										
										<td align="center">
											<h:inputText autocomplete="off" id="cuentaParticipante" size="9" maxlength="5"
												value="#{estatusOpEfectivoBean.idFolioParticipante}"
												styleClass="textoControles #{estatusOpEfectivoBean.usuarioIndeval?'':'readonly'} campoNumericoAsterisco" />
											<h:message for="cuentaParticipante" />
											<rich:suggestionbox selectValueClass="autoCompleteSeleccionado"  for="cuentaParticipante"
												suggestionAction="#{estatusOpEfectivoBean.buscarCuentasParticipantePorPrefijo}"
												var="coincidencia" fetchValue="#{coincidencia.institucion.claveTipoInstitucion}#{coincidencia.institucion.folioInstitucion}"
												minChars="1" width="450" nothingLabel="Sin coincidencias"
												onsubmit="addLoader('cuentaParticipante');return true;"
												eventsQueue="folioTraspQueue" ignoreDupResponses="true"
												requestDelay="#{inicioSesionBean.delay}"
												oncomplete="removeLoader('cuentaParticipante'); return true;">
												<h:column>
													<h:outputText value="#{coincidencia.institucion.claveTipoInstitucion}#{coincidencia.institucion.folioInstitucion}" /> - <h:outputText
														value="#{coincidencia.institucion.nombreCorto}" />
												</h:column>
											</rich:suggestionbox>
										</td>
										<td align="center">
											<h:inputText autocomplete="off" id="cuentaContraparte" size="9"
												value="#{estatusOpEfectivoBean.idFolioContraparte}"
												maxlength="5"
												styleClass="textoControles campoNumericoAsterisco" />
											<rich:suggestionbox selectValueClass="autoCompleteSeleccionado"  for="cuentaContraparte"
												suggestionAction="#{estatusOpEfectivoBean.buscarCuentasContrapartePorPrefijo}"
												var="coincidencia" fetchValue="#{coincidencia.institucion.claveTipoInstitucion}#{coincidencia.institucion.folioInstitucion}"
												minChars="0" width="450" nothingLabel="Sin coincidencias"
												onsubmit="addLoader('cuentaContraparte');return true;"
												eventsQueue="folioRecepQueue" ignoreDupResponses="true"
												requestDelay="#{inicioSesionBean.delay}"
												oncomplete="removeLoader('cuentaContraparte'); return true;">
												<h:column>
													<h:outputText value="#{coincidencia.institucion.claveTipoInstitucion}#{coincidencia.institucion.folioInstitucion}" /> - <h:outputText
														value="#{coincidencia.institucion.nombreCorto}" />
												</h:column>
											</rich:suggestionbox>
										</td>
										<td align="center">
											<rich:calendar id="fechaLiquidacion" 
												value="#{estatusOpEfectivoBean.criterio.fechaLiquidacion}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
										</td>
										<td>
											<h:selectOneMenu
												value="#{estatusOpEfectivoBean.criterio.rol}" id="selectRol"
												styleClass="textoControles">
												<f:selectItem itemLabel="AMBOS" itemValue="0" />
												<f:selectItem itemLabel="TRASPASANTE" itemValue="1" />
												<f:selectItem itemLabel="RECEPTOR" itemValue="2" />
											</h:selectOneMenu>
										</td>
										<td>											
											<h:selectOneMenu id="selectEstatus"
												styleClass="textoControles"
												value="#{estatusOpEfectivoBean.criterio.estadoInstruccion.idEstadoInstruccion}">
												<f:selectItem itemLabel="TODOS" itemValue="-1" />												
												<f:selectItems
													value="#{estatusOpEfectivoBean.estadosInstruccionItems}" />
											</h:selectOneMenu>
										</td>
										<td align="center">
											<h:inputText autocomplete="off" id="referenciaOperacion" size="12" maxlength="11"
												styleClass="textoControles campoNumerico"
												value="#{estatusOpEfectivoBean.criterio.referenciaOperacion}" onchange="validarSiNumero(this.value);"></h:inputText>
										</td> 
									</tr>
									<tr>
										<td colspan="8"></td>
									</tr>
								    <tr>
										<td colspan="2">
											<h:outputText styleClass="texto"
												value="#{etq.boveda}" />
										</td>
										<td>
											<h:outputText styleClass="texto"
												value="#{etq.instruccionMinus}" />
										</td>
										<td>
											<h:outputText value="#{etq.tipoRetiro}" />
										</td>
										<td>
											<h:outputText value="#{etq.folioOrigen}" />
										</td>
										<td align="center">
											<h:outputText styleClass="texto" value="#{etq.monto}" /><br/>
										</td>
										<td  colspan="2">&#160;</td> 
																	
									</tr>	 
									<tr>
											<td colspan="2">											
											<h:selectOneMenu id="selectDivisa2" styleClass="textoControles" value="#{estatusOpEfectivoBean.criterio.boveda.id}" >
												<f:selectItem itemLabel="TODAS" itemValue="-1"/>												
												<f:selectItems value="#{estatusOpEfectivoBean.bovedasItems}"/>
											</h:selectOneMenu> 
										</td>
										<td>
											<h:inputText autocomplete="off" id="tipoOp" size="6" maxlength="4"
												styleClass="textoControles campoAlphaNumericoAsterisco"
												alt="#{estatusOpEfectivoBean.criterio.tipoInstruccion.descripcion}"
												value="#{estatusOpEfectivoBean.tipoInstruccion}">
												<a4j:support event="onchange"
													actionListener="#{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro" />
											</h:inputText>
											<rich:suggestionbox selectValueClass="autoCompleteSeleccionado"  for="tipoOp"
												suggestionAction="#{estatusOpEfectivoBean.buscarTipoInstruccionPorPrefijo}"
												var="coincidencia" fetchValue="#{coincidencia.nombreCorto}"
												minChars="0" width="450" nothingLabel="Sin coincidencias"
												onsubmit="addLoader('tipoOp');return true;"
												eventsQueue="tipoInstrucQueue" ignoreDupResponses="true"
												requestDelay="#{inicioSesionBean.delay}"
												oncomplete="removeLoader('tipoOp'); return true;">
												<h:column>
													<h:outputText value="#{coincidencia.nombreCorto}" /> - <h:outputText
														value="#{coincidencia.instruccion}" />
												</h:column>
												<a4j:support event="onselect"
													actionListener="#{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro" />
											</rich:suggestionbox>
										</td>
										<td>
											<h:selectOneMenu id="tipoRetiro"
												value="#{estatusOpEfectivoBean.criterio.tipoRetiro}"
												styleClass="#{estatusOpEfectivoBean.muestraTipoRetiro ? 'textoControles' : 'readonly textoControles'}"
												disabled="#{!estatusOpEfectivoBean.muestraTipoRetiro}">
												<f:selectItem itemValue="0" itemDescription="TODOS"
													itemLabel="TODOS" />
												<f:selectItem itemValue="1" itemDescription="SPEI"
													itemLabel="SPEI" />
												<f:selectItem itemValue="2" itemDescription="SIAC"
													itemLabel="SIAC" />
												<f:selectItem itemValue="3" itemDescription="CCS"
													itemLabel="CCS" />		
											</h:selectOneMenu>
										</td>
										<td>
											<h:inputText autocomplete="off" id="referenciaPaquete" size="18" maxlength="16"
												value="#{estatusOpEfectivoBean.criterio.referenciaPaquete}"
												styleClass="textoControles campoAlphaNumerico" />
										</td> 
										<td align="center">
											<h:inputText autocomplete="off" id="monto" size="10"
												value="#{estatusOpEfectivoBean.criterio.monto}"
												styleClass="textoControles campoNumericoDecimalDosDecimales"
												converter="formatoMonedaConverter">
                                        	</h:inputText>
										</td>
										<td colspan="2">&#160;</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</div>
				<h:panelGroup id="panelResumen">

					<div
						style='display: #{ estatusOpEfectivoBean . consultaEjecutada ? "inline" : "none"}'
						id="divResumen">
						

						<table width="100%" border="0" cellpadding="0px" cellspacing="5px">
							<tr>
								<td class="recuadroTabla">
									<table width="100%" cellpadding="0" border="0" style="text-align: center">										
										<tr>
										<td  >
											<h:outputText styleClass="texto"
												value="#{etq.divisa}" />
										</td>
											<td >
												<h:outputText styleClass="texto"
													value="#{etq.participanteMinus}" />
											</td>
											<td > 
												<h:outputText styleClass="texto"
													value="#{etq.contraparteMinus}" />
											</td>
											<td >
												<h:outputText styleClass="texto" value="#{etq.fechaLiq}" />
											</td>
											<td >
												<h:outputText styleClass="texto" value="#{etq.rolMinus}" />
											</td>
											<td >
												<h:outputText styleClass="texto" value="#{etq.estatus}" />
											</td>
											<td >
												<h:outputText styleClass="texto" value="#{etq.referenciaOperacion}" />
											</td>
											
										</tr> 
										<tr class="textoResumen">
											<td >
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.divisa.descripcion}" />
											</td>
											<td>
												<h:outputText
													value="#{empty estatusOpEfectivoBean.idFolioParticipante ?'TODAS' : estatusOpEfectivoBean.idFolioParticipante}"
													title="#{estatusOpEfectivoBean.idFolioParticipante}" />
											</td>
											<td>
												<h:outputText
													value="#{empty estatusOpEfectivoBean.idFolioContraparte ?'TODAS' : estatusOpEfectivoBean.idFolioContraparte}"
													title="#{estatusOpEfectivoBean.idFolioContraparte}" />
											</td>
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.fechaLiquidacion}">
													<f:converter converterId="formatoFechaCortoConverter" />
												</h:outputText>
											</td>
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.descripcionRol}">
												</h:outputText>
											</td>
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.estadoInstruccion.descripcion}" />
											</td>
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.referenciaOperacion}" />
											</td>
										
										</tr>
										
										<tr> 
											<td colspan="8"> </td>  
										</tr>
										<tr>
											<td>
												<h:outputText styleClass="texto"
													value="#{etq.bovedaMinus}" />
											</td>
											<td >
												<h:outputText styleClass="texto"
													value="#{etq.instruccionMinus}" />
											</td>
											<td >
												<h:outputText styleClass="texto" value="#{etq.tipoRetiro}" />
											</td>
											<td >
												<h:outputText styleClass="texto" value="#{etq.folioOrigen}" />
											</td>
											<td align="center">
												<h:outputText styleClass="texto" value="#{etq.monto}" />
											</td>
										</tr>	 
																	
											<tr class="textoResumen">
												<td >
												 	<h:outputText
													value="#{empty estatusOpEfectivoBean.criterio.boveda ?'TODAS': estatusOpEfectivoBean.criterio.boveda.nombreCorto}"
													title="#{estatusOpEfectivoBean.criterio.boveda.nombreCorto}" />	
												</td>
												<td>
												<h:outputText
													value="#{empty estatusOpEfectivoBean.tipoInstruccion ?'TODAS': estatusOpEfectivoBean.tipoInstruccion}"
													title="#{estatusOpEfectivoBean.criterio.tipoInstruccion.descripcion}" />
											</td>
											<td>
												<h:outputText
													value="#{ estatusOpEfectivoBean.criterio.tipoRetiro == '1' ? 'SPEI': (estatusOpEfectivoBean.criterio.tipoRetiro == '2' ? 'SIAC': (estatusOpEfectivoBean.criterio.tipoRetiro == '3' ?'CCS' :'TODOS') )}" />
											</td>
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.referenciaPaquete}" />
											</td>
											<td align="center">
												<h:outputText value="#{estatusOpEfectivoBean.criterio.monto}" converter="formatoMonedaConverter" />
											</td>
										</tr>
									
										
									</table>
								</td>
							</tr>
						</table>
					</div>
				</h:panelGroup>
			</h:panelGroup>
		</ui:define>
		<ui:define name="botones">
			<br />
			<h:panelGroup id="panelBotones">
				<div class="refrescar" style="float: left;">
					<a4j:status id="commonStatus">
						<f:facet name="start">
							<h:panelGroup>
								<h:graphicImage value="/images/ajax-loader.gif" />
								<h:outputText value="#{etq.buscando}"></h:outputText>
							</h:panelGroup>
						</f:facet>
					</a4j:status>
				</div>
				<div class="limpiar" style="float: right;">
					<h:commandButton type="image" value="Limpiar" styleClass="submit"
						actionListener="#{estatusOpEfectivoBean.limpiar}"
						image="/images/transparent.gif" alt="Limpiar" title="Limpiar" />
				</div>
				<div class="buscar" style="float: right;">
					<a4j:commandButton type="image" value="Buscar" id="botonBuscar"
						action="#{estatusOpEfectivoBean.buscarOperacionesEfectivo}"
						styleClass="submit" 
						onclick="javascript:buscarRegistros();"
						oncomplete="if(#{estatusOpEfectivoBean.consultaEjecutada})presentarResumen();"
						reRender="panelBotones, panelResumen, panelResultados, checkAllAutorizaEnabled, checkAllLiberaEnabled"
						image="/images/transparent.gif" alt="Buscar" title="Buscar" >
						
						<a4j:actionparam name="navCuentaiDebeBitacorear"  value="true" 
							assignTo="#{estatusOpEfectivoBean.debeDejarBitacora}" />
					</a4j:commandButton>
				</div>
				<div class="editar"
					style="display: #{ estatusOpEfectivoBean.consultaEjecutada ?'inline':'none'}"
					id="botonEditarCriterios">
					<input type="image" class="submit"
						src="#{facesContext.externalContext.requestContextPath}/images/transparent.gif"
						alt="Editar Criterios" title="Editar Criterios"
						onclick="setTimeout('presentarCriterios()',1000); return false;" />
				</div>
			</h:panelGroup>
		</ui:define>
		<ui:define name="seccionContenido">
			<table cellpadding="0" cellspacing="0" border="0" width="900px" style="margin-left:0px;">
				<tr>
					<td width="900px">
						<h:panelGroup id="panelResultados">
							<h:inputHidden
								value="#{estatusOpEfectivoBean.paginacion.numeroPagina}" />
							<h:inputHidden
								value="#{estatusOpEfectivoBean.paginacion.totalResultados}" />
							<h:inputHidden
								value="#{estatusOpEfectivoBean.paginacion.totalPaginas}" />
							<div
								style="display: #{ estatusOpEfectivoBean . consultaEjecutada ? 'inline' : 'none'}">
								<table cellpadding="0" cellspacing="0" border="0" align="left"
									width="900px"
									style="display: #{ empty estatusOpEfectivoBean . resultados ? 'none' : 'inline'}">
									<tr>
										<td colspan="20">
											<img
												src="#{facesContext.externalContext.requestContextPath}/images/blank.gif"
												width="900px" height="0px" style="height: 1px" />
										</td>
									</tr>
									<tr>
										<td colspan="2">
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlPrimero ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_posicion_primero" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_primero.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlPrincipio" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retrocederRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_atras_fast" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras_fast.png"
														border="0" />
													<f:attribute name="navegacion"
														value="retrocederPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retroceder ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_atras" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras.png"
														border="0" />
													<f:attribute name="navegacion" value="retrocederPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzar ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_adelante" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzarRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_adelante_fast"
													reRender="panelResultados" onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante_fast.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlUltimo ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_ultimo" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_ultimo.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlUltimo" />
												</a4j:commandLink>
											</div>
										</td>
									</tr>
									<tr>
										<td width="450">
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.mostrandoPagina}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.abrir}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{estatusOpEfectivoBean.paginacion.numeroPagina}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.de}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{estatusOpEfectivoBean.paginacion.totalPaginas}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.entre}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{estatusOpEfectivoBean.paginacion.totalResultados}"></h:outputText>
											&#160;
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.registrosEncontrados}" />
										</td>
										<td align="right" width="450">
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.registrosPorPagina}" />
											<h:selectOneMenu
												value="#{estatusOpEfectivoBean.paginacion.registrosPorPagina}"
												styleClass="">
												<f:selectItem itemValue="1" itemLabel="1" />
												<f:selectItem itemValue="5" itemLabel="5" />
												<f:selectItem itemValue="10" itemLabel="10" />
												<f:selectItem itemValue="20" itemLabel="20" />
												<f:selectItem itemValue="50" itemLabel="50" />
												<f:selectItem itemValue="100" itemLabel="100" />
												<a4j:support reRender="panelResultados" event="onchange"
													limitToList="true"
													actionListener="#{estatusOpEfectivoBean.cambiarTamanioPagina}"
													onchange="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);" >
												</a4j:support>
											</h:selectOneMenu>
											<h:inputHidden value="0" />
											<h:inputHidden value="0" />
											<h:inputHidden value="0" />
										</td>
									</tr>
								</table>
								<br />
								<table border="0" class="tablaGeneral" cellspacing="0px"
									width="900px"
									style="display: #{ empty estatusOpEfectivoBean . resultados ? 'inline' : 'none'}">
									<tr>
										<td colspan="20">
											<img
												src="#{facesContext.externalContext.requestContextPath}/images/blank.gif"
												width="900px" height="0px" style="height: 1px" />
										</td>
									</tr>
									<tr>
										<th class="tituloTabla" width="900px">
											<h:outputText value="#{etq.sinResultados}" />
										</th>
									</tr>
								</table>
								
								
								<table border="0" class="tablaGeneral" width="900px"
									cellspacing="0px"
									style="display: #{ empty estatusOpEfectivoBean . resultados ? 'none' : 'inline'}">
									<tr>
										<td colspan="20">
											<img src="#{facesContext.externalContext.requestContextPath}/images/blank.gif"
												width="900px" height="0px" style="height: 1px" />
										</td>
									</tr>
									<tr align="center">
										<!-- TRASPASANTE / AUTORIZAR - LIBERAR -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto"
												value="#{etq.traspasanteMinus} / #{etq.autorizar}-#{etq.liberar}" />&#160;
											
											<!-- AUTORIZAR TODOS -->
											<t:div rendered="#{!empty sessionScope.roles['RET_NAL_AUTORIZA']}">
												<h:selectBooleanCheckbox id="chk_aprobar" value="#{estatusOpEfectivoBean.checkAllAutoriza}" class="chkAllAutoriza" 
													disabled="#{!estatusOpEfectivoBean.checkAllAutorizaEnabled}">
													<a4j:support event="onclick" 
														oncomplete="javascript:seleccionarTodosAutoriza(this.checked);"
														actionListener="#{estatusOpEfectivoBean.checkAllOperAutoriza}"
														reRender="mensajesConsulta, validationErrors, idsAutorizar"></a4j:support>
												</h:selectBooleanCheckbox>
												&#160;
												<a4j:commandLink id="btnAutorizaSeleccion" disabled="#{!estatusOpEfectivoBean.checkAllAutorizaEnabled}"
													title="#{etq.autorizaSeleccion}" alt="#{etq.autorizaSeleccion}" 
													action="#{estatusOpEfectivoBean.autorizaSeleccion}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors"
													onclick="if (window.confirm('#{mensajes.mensajeConfirmarAutorizaSeleccion}') ){ disableAllButtons(); } else {return false;}"
													oncomplete="enableAllButtons();">
													<h:graphicImage value="/images/aprobar.png" title="#{etq.autorizaSeleccion}" height="16" width="16" />
												</a4j:commandLink>
												
												<a4j:commandLink id="btnAutorizaSeleccion2" styleClass="hidden"
													action="#{estatusOpEfectivoBean.autorizaSeleccion}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors"
													oncomplete="if(hasErrors()){ return false; }else{ desbloquearSeccionBotones(); actualizarGrid(); }">
													<h:graphicImage value="/images/aprobar.png" height="16" width="16" />
												</a4j:commandLink>
											</t:div>
											
											<!-- LIBERAR TODOS -->
											<t:div rendered="#{!empty sessionScope.roles['RET_NAL_LIBERA']}">
												<h:selectBooleanCheckbox id="chk_liberar" value="#{estatusOpEfectivoBean.checkAllLibera}" class="chkAllLibera" 
													disabled="#{! estatusOpEfectivoBean.checkAllLiberaEnabled}">
													<a4j:support event="onclick" 
														oncomplete="javascript:seleccionarTodosLibera(this.checked);"
														actionListener="#{estatusOpEfectivoBean.checkAllOperLibera}"
														reRender="mensajesConsulta, validationErrors, idsLiberar"></a4j:support>
												</h:selectBooleanCheckbox>
												&#160;
												<a4j:commandLink id="btnLiberaSeleccion" disabled="#{! estatusOpEfectivoBean.checkAllLiberaEnabled}"
													title="#{etq.liberaSeleccion}" alt="#{etq.liberaSeleccion}" 
													action="#{estatusOpEfectivoBean.liberaSeleccion}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors"
													onclick="if (window.confirm('#{mensajes.mensajeConfirmarLiberaSeleccion}') ) { disableAllButtons(); } else {return false;}"
													oncomplete="enableAllButtons();">
													<h:graphicImage value="/images/liberar.png" title="#{etq.liberaSeleccion}" height="16" width="16" />
												</a4j:commandLink>
												
												<a4j:commandLink id="btnLiberaSeleccion2" styleClass="hidden"
													action="#{estatusOpEfectivoBean.liberaSeleccion}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors"
													oncomplete="if(hasErrors()){ return false; }else{ desbloquearSeccionBotones(); actualizarGrid(); }">
													<h:graphicImage value="/images/liberar.png" height="16" width="16" />
												</a4j:commandLink>
											</t:div>
										</th>
										<!-- RECEPTOR -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.receptorMinus}" />
										</th>
										<!-- REFERENCIA OPERACION / FOLIO INSTRUCCION -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto"
												value="#{etq.referenciaOperacion} / #{etq.folioInstruccion}" />
										</th>
										<!-- IMPORTE - DIVISA / BOVEDA -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.importe}" /> <br />
											<h:outputText styleClass="texto" value="#{etq.divisaMinus} / #{etq.bovedaMinus}" />
										</th> 
										<!-- FECHA LIQUIDACION / FECHA APROBACION -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.fechaLiq} / #{etq.fechaAprobacion}" />
										</th>
										<!-- INSTRUCCION - CLAVE RASTREO -->
										<th class="tituloTabla" style="text-align: center">										
											<h:outputText styleClass="texto" value="#{etq.instruccionMinus} /" /> <br/>
											<h:outputText styleClass="texto" value="#{etq.claveRastreo} " /> <br/>
										</th>
										<!-- ESTATUS -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.estatus}" />
										</th>
										<!-- MENSAJE / ESTATUS SPEI-->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.mensajeMinus} / #{etq.estatus} #{etq.tipoRetiroSPEI}" />
										</th>
										<!-- ORIGEN / CUENTA BENEFICIARIO -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.origen} / #{etq.cuentaBeneficiario}" />
										</th>
										<!-- CONCEPTO / NOMBRE BENEFICIARIO -->
										<th class="tituloTabla" style="text-align: center;" >
											<h:outputText styleClass="texto" value="#{etq.concepto} / #{etq.nombreBeneficiario}" />
										</th>
										<!-- REFERENCIA NUMERICA / FECHA AUTORIZACION -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.referenciaNumerica} / #{etq.fechaAutorizacion}" />
										</th>
										<!-- TIPO RETIRO / FECHA LIBERACION -->
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.tipoRetiro} / #{etq.fechaLiberacion}" />
										</th>
									</tr>							
									<t:dataList value="#{estatusOpEfectivoBean.resultados}"
										var="operacion" rowIndexVar="indice">
										<tr align="center">
											<!-- TRASPASANTE -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText
													value="#{operacion.institucionTraspasante.claveTipoInstitucion}#{operacion.institucionTraspasante.folioInstitucion}"
													title="#{operacion.institucionTraspasante.claveTipoInstitucion}#{operacion.institucionTraspasante.folioInstitucion}" />
											</td>
											<!-- RECEPTOR -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText
													value="#{operacion.institucionReceptora.claveTipoInstitucion}#{operacion.institucionReceptora.folioInstitucion}"
													title="#{operacion.institucionReceptora.claveTipoInstitucion}#{operacion.institucionReceptora.folioInstitucion}" />
											</td>
											<!-- REFERENCIA OPERACION -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.referenciaOperacion}" />&#160;
											</td>
											<!-- MONTO -->
											<td nowrap="true" align="right" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.monto}" converter="formatoMonedaConverter" />
											</td>
											<!-- FECHA LIQUIDACION -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.fechaLiquidacion}" converter="formatoFechaLargoConverter" />
											</td>
											<!-- TIPO INSTRUCCION -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.tipoInstruccion.nombreCorto}" title="#{operacion.tipoInstruccion.descripcion}" />
											</td>
											<!-- ESTADO INSTRUCCION -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.estadoInstruccion.claveEstadoInstruccion}"
													title="#{operacion.estadoInstruccion.descripcion} - #{operacion.descripcionEstado}"
													rendered="#{operacion.estadoInstruccion.claveEstadoInstruccion == 'CE'}"></h:outputText>
												<h:outputText value="#{operacion.estadoInstruccion.claveEstadoInstruccion}"
													title="#{operacion.estadoInstruccion.descripcion}"
													rendered="#{operacion.estadoInstruccion.claveEstadoInstruccion != 'CE'}"></h:outputText>
											</td>
											<!-- MENSAJE -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.tipoMensaje.claveTipoMensaje}" />
											</td>
											<!-- ORIGEN -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.origen}"></h:outputText>
											</td>
											<!-- CONCEPTO -->
											<td class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.concepto}"></h:outputText>
											</td>
											<!-- REFERENCIA NUMERICA -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.referenciaNumerica}"></h:outputText>
											</td>
											<!-- TIPO DE RETIRO -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.tipoRetiro}"></h:outputText>
											</td>
										</tr>
										<tr align="center">
											<!-- ACCIONES -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												
												<!-- AUTORIZACION NAL -->
												<h:panelGroup rendered="#{operacion.moduloOrigen == 'c_retiro_efectivo_nal_aprobacion'
													and !empty sessionScope.roles['RET_NAL_AUTORIZA']
													and ( (estatusOpEfectivoBean.usuarioIndeval and 
														   operacion.tipoInstruccion.idTipoInstruccion == 30) 
														or
														  (operacion.institucionTraspasante.claveTipoInstitucion == sessionScope.institucion.claveTipoInstitucion and 
														   operacion.institucionTraspasante.folioInstitucion == sessionScope.institucion.folioInstitucion)) }">
													<div id="aprob_nal_#{operacion.idInstruccion}" >
														<h:selectBooleanCheckbox id="chk_aprobar_nal_#{operacion.idInstruccion}"  
															styleClass="chkAutoriza chk_aprobar_nal_#{operacion.idInstruccion}" 
															value="#{operacion.seleccionadoAutoriza}" onchange="onChangeChkAutoriza();" >
															<a4j:support event="onclick" actionListener="#{estatusOpEfectivoBean.checkOperAutoriza}"
																oncomplete="if(hasErrors()){ window.scrollTo(0,0); }"
																reRender="mensajesConsulta, validationErrors"></a4j:support>
														</h:selectBooleanCheckbox>
														
														<a4j:commandLink id="btnAprobarNacional_#{operacion.idInstruccion}" ajaxSingle="true" limitToList="true"
															title="#{etq.autoriza}" alt="#{etq.autoriza}" styleClass="btnAprobarNacional_#{operacion.idInstruccion}"
															action="#{estatusOpEfectivoBean.autoriza}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors, idInstruccion"
															onclick="if (window.confirm('#{mensajes.mensajeConfirmarAutoriza}') ){ disableAllButtons(); } else {return false;}"
															oncomplete="enableAllButtons();">
															<a4j:actionparam name="idInstruccion" value="#{operacion.idInstruccion}" />
															<h:graphicImage value="/images/aprobar.png" title="#{etq.autoriza}" height="16" width="16" />
														</a4j:commandLink>
														
														<a4j:commandLink id="btnAprobarNacional2_#{operacion.idInstruccion}"
															styleClass="hidden btnAprobarNacional2_#{operacion.idInstruccion}"
															action="#{estatusOpEfectivoBean.autoriza}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors, idInstruccion"
															oncomplete="if(hasErrors()){ return false; } else { desbloquearSeccionBotones(); actualizarGrid(); }">
															<a4j:actionparam name="idInstruccion" value="#{operacion.idInstruccion}" />
														</a4j:commandLink>
													</div>
												</h:panelGroup >
												<!-- LIBERACION NAL -->
												<h:panelGroup rendered="#{operacion.moduloOrigen == 'c_retiro_efectivo_nal_liberacion'
													and !empty sessionScope.roles['RET_NAL_LIBERA']
													and ( (estatusOpEfectivoBean.usuarioIndeval and 
														   operacion.tipoInstruccion.idTipoInstruccion == 30) 
														or 
														  (operacion.institucionTraspasante.claveTipoInstitucion == sessionScope.institucion.claveTipoInstitucion and
														   operacion.institucionTraspasante.folioInstitucion == sessionScope.institucion.folioInstitucion)) }">
													<div id="libe_nal_#{operacion.idInstruccion}" >
														<h:selectBooleanCheckbox id="chk_liberar_nal_#{operacion.idInstruccion}"  
															styleClass="chkLibera chk_liberar_nal_#{operacion.idInstruccion}"  
															value="#{operacion.seleccionadoLibera}" onchange="onChangeChkLibera();" >
																<a4j:support event="onclick" actionListener="#{estatusOpEfectivoBean.checkOperLibera}"
																oncomplete="if(hasErrors()){ window.scrollTo(0,0); }"
																reRender="mensajesConsulta, validationErrors"></a4j:support>
														</h:selectBooleanCheckbox>
														
														<a4j:commandLink id="btnLiberarNacional_#{operacion.idInstruccion}" ajaxSingle="true" limitToList="true"
															title="#{etq.libera}" alt="#{etq.libera}" styleClass="btnLiberarNacional_#{operacion.idInstruccion}"
															action="#{estatusOpEfectivoBean.libera}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors, idInstruccion"
															onclick="if (window.confirm('#{mensajes.mensajeConfirmarLibera}') ){ disableAllButtons(); } else {return false;}"
															oncomplete="enableAllButtons();">
															<a4j:actionparam name="idInstruccion" value="#{operacion.idInstruccion}" />
															<h:graphicImage value="/images/liberar.png" title="#{etq.libera}" height="16" width="16" />
														</a4j:commandLink>
														
														<a4j:commandLink id="btnLiberarNacional2_#{operacion.idInstruccion}"
															styleClass="hidden btnLiberarNacional2_#{operacion.idInstruccion}"
															action="#{estatusOpEfectivoBean.libera}" reRender="mensajesConsulta, panelFirma, esTipo, validationErrors, idInstruccion"
															oncomplete="if(hasErrors()){ return false; } else { desbloquearSeccionBotones(); actualizarGrid(); }">
															<a4j:actionparam name="idInstruccion" value="#{operacion.idInstruccion}" />
														</a4j:commandLink>
													</div>
												</h:panelGroup >	
											</td>
											
											<!-- TIPO LIQUIDACION -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.tipoLiquidacion.nombreCorto} " title="#{operacion.tipoLiquidacion.nombreCorto} " />
											</td>
											<!-- FOLIO INSTRUCCION -->
											<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.folioInstruccion}" />
												&#160;
											</td>
											<!-- DIVISA / BOVEDA -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												 <h:outputText value="#{operacion.divisa}" /> &#160;/&#160;
												 <h:outputText value="#{operacion.boveda}" />
											</td>
											<!-- FECHA APROBACION !!! -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{(operacion.tipoInstruccion.idTipoInstruccion==33 and operacion.divisa=='MXN') ? operacion.fechaAplicacion:''}"
													converter="formatoFechaLargoConverter" />
											</td>
											<!-- CLAVE RASTREO -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:panelGroup rendered="#{operacion.porPaquete}">
													<a title="#{etq.verDetallePaquete}"
														href="javascript:mostrarDetalle('Detalle de traspasos en paquete','#{facesContext.externalContext.requestContextPath}/match/detalleLiquidacionPaquetes.faces?referenciaPaquete=#{operacion.referenciaPaquete}&amp;totalOperacionesPaquete=#{operacion.totalOperacionesPaquete}&amp;numeroOperacionPaquete=#{operacion.numeroOperacionPaquete}&amp;totalTitulosPaquete=#{operacion.totalTitulosPaquete}&amp;totalImportePaquete=#{operacion.totalImportePaquete}&amp;folioControl=#{operacion.folioInstruccion}')">
														<h:outputText value="#{operacion.referenciaPaquete}"></h:outputText>&#160;
													</a>
												</h:panelGroup>
												<h:panelGroup rendered="#{!operacion.porPaquete}">
													<h:outputText value="#{operacion.claveRastreo}" />&#160;
												</h:panelGroup>
											</td>
											<!-- VACIO-->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">&#160;</td>
											<!-- ESTATUS SPEI -->
											<td nowrap="true" align="center" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">																					
												<h:outputText value="#{operacion.liqSpei == 1 ? 'Aplicado' : (operacion.liqSpei==0 ?'Aprobado':'')}" />											
											</td>
											<!-- CUENTA BENEFICIARIO -->
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.cuentaReceptora.cuenta} " title="#{operacion.cuentaReceptora.cuenta} "></h:outputText>
											</td>
											<!-- NOMBRE CUENTA EFECTIVO -->
											<td  nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.cuentaReceptora.nombreCuenta} " title="#{operacion.cuentaReceptora.nombreCuenta} "></h:outputText>
											</td>
											<!-- FECHA AUTORIZACION -->
											<td  nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.fechaAutorizacion}" converter="formatoFechaLargoConverter" />
											</td>
											<!-- FECHA LIBERACION -->
											<td  nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.fechaLiberacion}" converter="formatoFechaLargoConverter" />
											</td>
										</tr>
									</t:dataList>
									<tr>
										<td class="tituloTabla">&#160;</td>
										<td class="tituloTabla">&#160;</td>
										<td class="tituloTabla"><h:outputText value="#{etq.totalMinus}" /></td>
										<td class="tituloTabla" nowrap="true" align="right" style="text-align: right">
											<h:outputText value="#{estatusOpEfectivoBean.totalImporte}" converter="formatoMonedaConverter" style="text-align: right" />
										</td>
										<td colspan="9" class="tituloTabla">&#160;</td>
									</tr>
								</table>
													
								<table cellpadding="0" cellspacing="0" border="0" align="left"
									width="900px">
									<tr>
										<td>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlPrimero ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_posicion_primero2" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_primero.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlPrincipio" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retrocederRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_atras_fast2"
													reRender="panelResultados" onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras_fast.png"
														border="0" />
													<f:attribute name="navegacion"
														value="retrocederPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retroceder ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_atras2" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras.png"
														border="0" />
													<f:attribute name="navegacion" value="retrocederPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzar ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_adelante2" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzarRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_adelante_fast2"
													reRender="panelResultados" onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante_fast.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlUltimo ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultados}"
													id="control_consulta_ultimo2" reRender="panelResultados"
													onclick="buscarRegistros();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_ultimo.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlUltimo" />
												</a4j:commandLink>
											</div>
										</td>
										<td align="right">
											<div style="display: #{ not empty estatusOpEfectivoBean . resultados ? 'inline' : 'none'}">
												&#160;
												<h:commandButton id="generarTxt"
													style="display: #{ !empty sessionScope.roles['INDEVAL'] ? 'inline' : 'none'}"
													action="estatusOpEfectivoTxt"
													actionListener="#{estatusOpEfectivoBean.generarReportes}"
													image="/images/TXT.gif"
													title="Exportar a Txt todos los resultados de la consulta"
													onclick="bloquearBotonesReportes(['generarTxt', 'generarExcel', 'generarPdf']);" />
												&#160;	
												<h:commandButton id="generarExcel"
													action="estatusOpEfectivoXls"
													actionListener="#{estatusOpEfectivoBean.generarReportes}"
													image="/images/excel-file.gif"
													title="Exportar a Excel todos los resultados de la consulta"
													onclick="bloquearBotonesReportes(['generarTxt', 'generarExcel', 'generarPdf']);" />
												&#160;
												<h:commandButton id="generarPdf"
													action="estatusOpEfectivoPdf" 
													actionListener="#{estatusOpEfectivoBean.generarReportes}"
													image="/images/pdf.gif"
													title="Exportar a PDF todos los resultados de la consulta"
													onclick="bloquearBotonesReportes(['generarTxt', 'generarExcel', 'generarPdf']);" />
												<div id="monitorPeticionReporte" style="display: none;">
													<h:panelGroup id="panelMonitorPeticionReporte">
														<h:graphicImage value="/images/ajax-loader.gif" />
														&#160;&#160;
														<h:outputText value="#{etq.reporteEnProceso}" />
														<a4j:commandButton id="btnActualizarEstadoPeticion"
															image="/images/transparent.gif"
															styleClass="submit"
															actionListener="#{estatusOpEfectivoBean.actualizarEstadoPeticion}"
															reRender="panelMonitorPeticionReporte"
															oncomplete="desbloquearBotonesReportes(#{estatusOpEfectivoBean.peticionReporteCompleta}, ['generarTxt', 'generarExcel', 'generarPdf']);"/>
													</h:panelGroup>
												</div>
											</div>
										</td>
									</tr>
								</table>
							</div>
						</h:panelGroup>
						
						
						<!-- La facultad debe reflejar el valor de SeguridadConstants.FACULTAD_FIRMA_OPERACION -->
						<indeval:authorizeFaculty userInFaculty="CON_CERTIFICADO">
							<h:panelGroup id="panelFirma">								
								<h:panelGroup
									rendered="#{not empty estatusOpEfectivoBean.isosSinFirmar}">
																		
										<div style="display: none">
										
										<t:dataList value="#{estatusOpEfectivoBean.isosSinFirmar}"
											rowIndexVar="indice" var="iso">
				
											<!-- Importante no dejar espacios despues de la llave que cierra -->
											<textarea id="isoSinFirmar#{indice+1}"
												name="isoSinFirmar#{indice+1}">#{estatusOpEfectivoBean.isosSinFirmar[indice]}</textarea>
				
											<textarea id="isoFirmado#{indice+1}"
												name="isoFirmado#{indice+1}"></textarea>
				
											<textarea id="hashIso#{indice+1}" name="hashIso#{indice+1}">#{estatusOpEfectivoBean.hashIso[indice]}</textarea>
											
											<textarea id="referenciaOperaciones#{indice+1}" name="referenciaOperaciones#{indice+1}">#{estatusOpEfectivoBean.referenciaOperaciones[indice]}</textarea>				
											<textarea id="referenciaMensajes#{indice+1}" name="referenciaMensajes#{indice+1}">#{estatusOpEfectivoBean.referenciaMensajes[indice]}</textarea>
				
										</t:dataList>
																			
										<textarea  id="numeroSerie" name="numeroSerie"></textarea>
										<textarea  id="numeroSerieUsuario" name="numeroSerieUsuario">#{sessionScope.usuario.numeroSerieCertificado}</textarea>										
										<textarea name="totalOperaciones"  id="totalOperaciones">#{estatusOpEfectivoBean.totalOperaciones}</textarea>
									</div>
	
	<script>
		function firmarOperacion(){
			var sonConfirmaciones= 'true'; //'{estatusOpEfectivoBean.confirmacion}';										   
			
			var idsConfirmar=null;
			var divItems=null;	
			
			var esTipo= $j('#daliForm\\:esTipo')[0];
			var btnAutorizaSeleccion = $j('#daliForm\\:btnAutorizaSeleccion2')[0];
			var btnLiberaSeleccion = $j('#daliForm\\:btnLiberaSeleccion2')[0];
			
			var idInstruccion  = null;
			var nameC = null;
			
			if (esTipo.value == 'autorizaSeleccion'){
				console.log('autorizaSeleccion');
				
				bloquearSeccionBotones();
				disableAllButtons();
				
				btnAutorizaSeleccion.click();
			}else if (esTipo.value == 'liberaSeleccion'){
				console.log('liberaSeleccion');
				
				bloquearSeccionBotones();
				disableAllButtons();
				
				btnLiberaSeleccion.click();
			}else if (esTipo.value == 'autoriza'){
				console.log('autoriza');
				idInstruccion = $j('#daliForm\\:idInstruccion')[0];
				nameC = 'a.btnAprobarNacional2_' + idInstruccion.value;
				
				bloquearSeccionBotones();
				disableAllButtons();
				
				$j(nameC).click();
			}else if (esTipo.value == 'libera'){
				console.log('libera');
				idInstruccion = $j('#daliForm\\:idInstruccion')[0];
				nameC = 'a.btnLiberarNacional2_' + idInstruccion.value;
				
				bloquearSeccionBotones();
				disableAllButtons();
				
				$j(nameC).click();
			}else{
				console.log('esTipo', esTipo.value);
			}
			
			removeAppletEfectivo();		
			
			
		} 
	</script>
				                    <div id="firmaId">
									<ui:decorate template="/firmaDigitalMultiple.xhtml"></ui:decorate>
									</div>	
									
								</h:panelGroup>
							</h:panelGroup>
						</indeval:authorizeFaculty>
					</td>
				</tr>
			</table>
		</ui:define>
	</ui:composition>
</html>


