<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en"
	xmlns:a4j="http://richfaces.org/a4j"	
	xmlns:rich="http://richfaces.org/rich"
	xmlns:indeval="http://indeval.com/indeval"
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<ui:decorate template="/layoutConsultas.xhtml">
		<ui:define name="titulo">
			<h:outputText value="#{etq.estatusOp}" />
		</ui:define>
		<ui:define name="head">
			<link rel="stylesheet" type="text/css" media="all"
				href="#{facesContext.externalContext.requestContextPath}/css/calendar-blue.css" />
			<script language="javascript" type="text/javascript"
				src="#{facesContext.externalContext.requestContextPath}/js/opEfectivo.js"></script>
			<script language="javascript" type="text/javascript"
				src="#{facesContext.externalContext.requestContextPath}/js/calendar.js"></script>
			<script language="javascript" type="text/javascript"
				src="#{facesContext.externalContext.requestContextPath}/js/date.js"></script>
			<script language="javascript" type="text/javascript"
				src="#{facesContext.externalContext.requestContextPath}/js/calendar-es.js"></script>
			<script language="javascript" type="text/javascript"
				src="#{facesContext.externalContext.requestContextPath}/js/calendar-setup.js"></script>
			<script language="javascript" type="text/javascript">
				function envia(recibe){
					if (recibe==1){//Si es Mexican Peso
						window.location='#{facesContext.externalContext.requestContextPath}/efectivo/estatusOpEfectivo.faces';
					}
					else{
						//window.location='#{facesContext.externalContext.requestContextPath}/efectivo/estatusOpEfectivoDivIntl.faces';
					} 
				}
			</script>
			<script language="javascript" type="text/javascript"
                src="#{facesContext.externalContext.requestContextPath}/js/mostrarFirmaDigital.js"></script>	
				
		</ui:define>
		<ui:define name="tituloSeccion">
			<h:outputText value="#{etq.estatusOp}" />
		</ui:define>
		<ui:define name="subtituloSeccion">
			<h:outputText value="#{etq.operacionesEfectivo}" />
		</ui:define>
		<ui:define name="mensajeUsuario">
		</ui:define>
		<ui:define name="criterios">
			<a4j:keepAlive beanName="estatusOpEfectivoBean" />
			<h:panelGroup id="panelCriterios">
				<h:outputText value="#{estatusOpEfectivoBean.init}" />
				<h:inputHidden value="#{estatusOpEfectivoBean.consultaEjecutada}"></h:inputHidden>
				<h:inputHidden id="matchIdOperacionesConfirmar"/>
				<h:inputHidden id="matchIdOperacionesCancelar" />
				<h:inputHidden id="intlIdOperacionesLiberar"/>
				<h:inputHidden id="intlIdOperacionesAprobar" />


				
				
				<div
					style='display: #{ estatusOpEfectivoBean.consultaEjecutada ? "none" : "inline"}'
					id="divCriterios">
					<table width="100%" border="0" cellpadding="0px" cellspacing="5px">
						<tr>
							<td class="recuadroTabla">
								<table class="tablaCriterios" border="0"
									style="text-align: center">
									<tr>
									    <td colspan="2">
											<h:outputText styleClass="texto"
												value="#{etq.divisa}" />
										</td>
										<td>
											<h:outputText styleClass="texto"
												value="#{etq.participanteMinus}" />
										</td>
										<!-- td>
											<h:outputText styleClass="texto"
												value="{etq.contraparteMinus}" />
										</td -->
										<td  align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaLiq}" />
										</td>
										<!-- td >
											<h:outputText styleClass="texto" value="{etq.rolMinus}" />
										</td-->
										<td >
											<h:outputText styleClass="texto" value="#{etq.estatus}" />
										</td>
										<td >
											<h:outputText styleClass="texto" value="#{etq.referenciaOperacion}" />
										</td>
										<td >
											
										</td>
										
										
									</tr>
									<tr>
										<td colspan="9">
										</td>										
									</tr>
									<tr>
									<td colspan="2">											
											<h:selectOneMenu id="selectDivisa"
												styleClass="textoControles"
												value="#{estatusOpEfectivoBean.criterio.divisa.id}"
												onchange="javascript:envia(this.options[this.selectedIndex].value);"
												>
												<f:selectItem itemLabel="TODAS LAS DIVISAS INTERNACIONALES." itemValue="-1" />												
												<f:selectItems
													value="#{estatusOpEfectivoBean.divisasItems}" />
											</h:selectOneMenu>
											<!-- a4j:support event="onchange"
													actionListener="{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro"  /-->
										</td>
										
										<td align="center">
											<h:inputText autocomplete="off" id="cuentaParticipante" size="9" maxlength="5"
												value="#{estatusOpEfectivoBean.idFolioParticipante}"
												styleClass="textoControles #{estatusOpEfectivoBean.usuarioIndeval?'':'readonly'} campoNumericoAsterisco" />
											<h:message for="cuentaParticipante" />
											<rich:suggestionbox selectValueClass="autoCompleteSeleccionado"  for="cuentaParticipante"
												suggestionAction="#{estatusOpEfectivoBean.buscarCuentasParticipantePorPrefijo}"
												var="coincidencia" fetchValue="#{coincidencia.institucion.claveTipoInstitucion}#{coincidencia.institucion.folioInstitucion}"
												minChars="1" width="450" nothingLabel="Sin coincidencias"
												onsubmit="addLoader('cuentaParticipante');return true;"
												eventsQueue="folioTraspQueue" ignoreDupResponses="true"
												requestDelay="#{inicioSesionBean.delay}"
												oncomplete="removeLoader('cuentaParticipante'); return true;">
												<h:column>
													<h:outputText value="#{coincidencia.institucion.claveTipoInstitucion}#{coincidencia.institucion.folioInstitucion}" /> - <h:outputText
														value="#{coincidencia.institucion.nombreCorto}" />
												</h:column>
											</rich:suggestionbox>
										</td>
										<!-- td align="center">
											<h:inputText autocomplete="off" id="cuentaContraparte" size="9"
												value="{estatusOpEfectivoBean.idFolioContraparte}"
												maxlength="5"
												styleClass="textoControles campoNumericoAsterisco" />
											<rich:suggestionbox selectValueClass="autoCompleteSeleccionado"  for="cuentaContraparte"
												suggestionAction="{estatusOpEfectivoBean.buscarCuentasContrapartePorPrefijo}"
												var="coincidencia" fetchValue="{coincidencia.institucion.claveTipoInstitucion}{coincidencia.institucion.folioInstitucion}"
												minChars="0" width="450" nothingLabel="Sin coincidencias"
												onsubmit="addLoader('cuentaContraparte');return true;"
												eventsQueue="folioRecepQueue" ignoreDupResponses="true"
												requestDelay="{inicioSesionBean.delay}"
												oncomplete="removeLoader('cuentaContraparte'); return true;">
												<h:column>
													<h:outputText value="{coincidencia.institucion.claveTipoInstitucion}{coincidencia.institucion.folioInstitucion}" /> - <h:outputText
														value="{coincidencia.institucion.nombreCorto}" />
												</h:column>
											</rich:suggestionbox>
										</td -->
										<td align="center">
											<rich:calendar id="fechaLiquidacion" 
												value="#{estatusOpEfectivoBean.criterio.fechaLiquidacion}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
										</td>
										<!-- td>
											<h:selectOneMenu
												value="{estatusOpEfectivoBean.criterio.rol}" id="selectRol"
												styleClass="textoControles">
												<f:selectItem itemLabel="AMBOS" itemValue="0" />
												<f:selectItem itemLabel="TRASPASANTE" itemValue="1" />
												<f:selectItem itemLabel="RECEPTOR" itemValue="2" />
											</h:selectOneMenu>
										</td-->
										<td>											
											<h:selectOneMenu id="selectEstatus"
												styleClass="textoControles"
												value="#{estatusOpEfectivoBean.criterio.estadoInstruccion.idEstadoInstruccion}">
												<f:selectItem itemLabel="TODOS" itemValue="-1" />
												<f:selectItem itemLabel="Cancelada" itemValue="2" />
												<f:selectItem itemLabel="Pendiente" itemValue="3" />
												<f:selectItem itemLabel="Liquidada" itemValue="6" />
												<f:selectItem itemLabel="Registrada" itemValue="19" />
												<f:selectItem itemLabel="Bloqueo Pendiente" itemValue="21" />
												<f:selectItem itemLabel="Pendiente de liquidaciÃ³n en el extranj" itemValue="22" />
												<f:selectItem itemLabel="Autorizada" itemValue="23" />
												<f:selectItem itemLabel="Liberada" itemValue="24" />
												<f:selectItem itemLabel="Enviada" itemValue="25" />
												
																								
												<!-- f:selectItems
													value="{estatusOpEfectivoBean.estadosInstruccionItems}" /-->
											</h:selectOneMenu>
										</td>
										<td align="center">
											<h:inputText autocomplete="off" id="referenciaOperacion" size="12" maxlength="11"
												styleClass="textoControles campoNumerico"
												value="#{estatusOpEfectivoBean.criterio.referenciaOperacion}"></h:inputText>
										</td>
										<td>
										</td>
											
									</tr>
									
								
								   <tr>
							
										<!-- td >
											<h:outputText styleClass="texto"
												value="{etq.instruccionMinus}" />
										</td-->
										<!-- td >
											<h:outputText value="{etq.tipoRetiro}" />
										</td-->
										<td  colspan="2" align="center">
											<h:outputText styleClass="texto"
												value="#{etq.boveda}" />
										</td>
										<td align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaValor}" />
										</td>
										<td  align="center">
											<h:outputText styleClass="texto" value="#{etq.fechaEnvio}" />
										</td>
										<td align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaAutorizacion}" />
										</td>
										<td align="center">
											<h:outputText styleClass="texto" value="#{etq.fechaLiberacion}" />
										</td>
										<td align="center">
											
										</td>
										
																		
									</tr>	
									
									<tr>
										<td colspan="9">
										</td>
										
									</tr>
									
									
									
										<tr>
										   	<!-- td>
											<h:inputText autocomplete="off" id="tipoOp" size="6" maxlength="4"
												styleClass="textoControles campoAlphaNumericoAsterisco"
												alt="{estatusOpEfectivoBean.criterio.tipoInstruccion.descripcion}"
												value="{estatusOpEfectivoBean.tipoInstruccion}">
												<a4j:support event="onchange"
													actionListener="{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro" />
											</h:inputText>
											<rich:suggestionbox selectValueClass="autoCompleteSeleccionado"  for="tipoOp"
												suggestionAction="{estatusOpEfectivoBean.buscarTipoInstruccionPorPrefijo}"
												var="coincidencia" fetchValue="{coincidencia.nombreCorto}"
												minChars="0" width="450" nothingLabel="Sin coincidencias"
												onsubmit="addLoader('tipoOp');return true;"
												eventsQueue="tipoInstrucQueue" ignoreDupResponses="true"
												requestDelay="{inicioSesionBean.delay}"
												oncomplete="removeLoader('tipoOp'); return true;">
												<h:column>
													<h:outputText value="{coincidencia.nombreCorto}" /> - <h:outputText
														value="{coincidencia.instruccion}" />
												</h:column>
												<a4j:support event="onselect"
													actionListener="{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro" />
											</rich:suggestionbox>
										</td -->
											<!--  td>
											<h:selectOneMenu id="tipoRetiro"
												value="{estatusOpEfectivoBean.criterio.tipoRetiro}"
												styleClass="{estatusOpEfectivoBean.muestraTipoRetiro ? 'textoControles' : 'readonly textoControles'}"
												disabled="{!estatusOpEfectivoBean.muestraTipoRetiro}">
												<f:selectItem itemValue="TODOS" itemDescription="TODOS"
													itemLabel="TODOS" />
											</h:selectOneMenu>
										</td-->
										
										<td colspan="2">											
											<h:selectOneMenu id="selectBoveda"
												styleClass="textoControles"
												value="#{estatusOpEfectivoBean.criterio.boveda.id}"												
												>
												<f:selectItem itemLabel="TODAS LAS BOVEDAS" itemValue="-1" />												
												<f:selectItems
													value="#{estatusOpEfectivoBean.bovedasItems}" />
											</h:selectOneMenu>
											<a4j:support event="onchange"
													actionListener="#{estatusOpEfectivoBean.verificaInstruccion}"
													reRender="tipoRetiro"  />
										</td>
										<td>
											<rich:calendar id="fechaValor" 
												value="#{estatusOpEfectivoBean.criterio.fechaValor}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
										</td>
										<td align="center">
											<rich:calendar id="fechaEnvio" 
												value="#{estatusOpEfectivoBean.criterio.fechaEnvio}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
										</td>
										<td align="center">
											<rich:calendar id="fechaAutorizacion" 
												value="#{estatusOpEfectivoBean.criterio.fechaAutorizacion}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
										</td>
										<td align="center">
											<rich:calendar id="fechaLiberacion" 
												value="#{estatusOpEfectivoBean.criterio.fechaLiberacion}"
												datePattern="dd/MM/yyyy"
												inputSize="11"
												inputClass="textoControles"
												inputStyle="background-color: #ffffe6;"
												isDayEnabled="isDayEnabled" />
										</td>
										<td align="center">
											
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</div>
				<h:panelGroup id="panelResumen">
					<div
						style='display: #{ estatusOpEfectivoBean . consultaEjecutada ? "inline" : "none"}'
						id="divResumen">

						<table width="100%" border="1" cellpadding="0px" cellspacing="5px">
							<tr>
								<td class="recuadroTabla">
									<table width="100%" cellpadding="0" border="0"
										style="text-align: center">
										
										<tr>
										<td colspan="2">
											<h:outputText styleClass="texto"
												value="#{etq.divisa}" />
										</td>
											<td>
												<h:outputText styleClass="texto"
													value="#{etq.participanteMinus}" />
											</td>
											<!-- td>
												<h:outputText styleClass="texto"
													value="{etq.contraparteMinus}" />
											</td-->
											<td rowspan="2">
												<h:outputText styleClass="texto" value="#{etq.fechaLiq}" />
											</td>
											<!-- td rowspan="2">
												<h:outputText styleClass="texto" value="{etq.rolMinus}" />
											</td-->
											<td rowspan="2">
												<h:outputText styleClass="texto" value="#{etq.estatus}" />
											</td>
											<td rowspan="2">
												<h:outputText styleClass="texto" value="#{etq.referenciaOperacion}" />
											</td>
											
										</tr>
										<tr>
											<td>
											</td>
											<td>
											</td>
										</tr>
										<tr class="textoResumen">
											<td colspan="2">
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.divisa.descripcion}" />
											</td>
											<td>
												<h:outputText
													value="#{empty estatusOpEfectivoBean.idFolioParticipante ?'TODAS' : estatusOpEfectivoBean.idFolioParticipante}"
													title="#{estatusOpEfectivoBean.idFolioParticipante}" />
											</td>
											<!-- td>
												<h:outputText
													value="{empty estatusOpEfectivoBean.idFolioContraparte ?'TODAS' : estatusOpEfectivoBean.idFolioContraparte}"
													title="{estatusOpEfectivoBean.idFolioContraparte}" />
											</td-->
											<td>
												<h:outputText value="#{estatusOpEfectivoBean.criterio.fechaLiquidacion}">
													<!-- f:converter converterId="formatoFechaCortoConverter" / -->
												</h:outputText>
											</td>
											<!-- td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.descripcionRol}">
												</h:outputText>
											</td-->
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.estadoInstruccion.descripcion}" />
											</td>
											<td>
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.referenciaOperacion}" />
											</td>
										
										</tr>
										
										
										<tr>
										<!-- td rowspan="2">
												<h:outputText styleClass="texto"
													value="{etq.instruccionMinus}" />
											</td -->
											<!--  td rowspan="2">
												<h:outputText styleClass="texto" value="{etq.tipoRetiro}" />
											</td-->
										<td align="center">
											<h:outputText styleClass="texto"
												value="#{etq.boveda}" />
										</td>
										<td align="left">
											<h:outputText styleClass="texto"
												value="#{etq.fechaValor}" />
										</td>
										<td  align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaEnvio}" />
										</td>
										<td  align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaAutorizacion}" >
												<!-- f:converter converterId="formatoFechaCortoConverter" / -->
											</h:outputText>
											
										</td>
										<td  align="left">
											<h:outputText styleClass="texto" value="#{etq.fechaLiberacion}" 
											 
											/>
										</td>
																			
									</tr>	
									
									<tr>
										<td>
										</td>
										<td>
										</td>
									</tr>	
																	
											<tr class="textoResumen">
												<!--td >
												<h:outputText
													value="{empty estatusOpEfectivoBean.tipoInstruccion ?'TODAS': estatusOpEfectivoBean.tipoInstruccion}"
													title="{estatusOpEfectivoBean.criterio.tipoInstruccion.descripcion}" />
											</td-->
											<!-- td>
												<h:outputText
													value="{empty estatusOpEfectivoBean.criterio.tipoRetiro ? 'TODOS' : estatusOpEfectivoBean.criterio.tipoRetiro}" />
											</td-->
											<td align="center">
												<h:outputText 
													value="#{estatusOpEfectivoBean.criterio.boveda.nombreCorto}"	>
												</h:outputText>
											</td>
											<td align="center">
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.fechaValor}">
												</h:outputText>
											</td>
											<td align="center">
												<h:outputText
													value="#{estatusOpEfectivoBean.criterio.fechaEnvio}">													
													
												</h:outputText>
											</td>
											<td align="center">
												<h:outputText styleClass="texto" value="#{estatusOpEfectivoBean.criterio.fechaAutorizacion}" >
													<!-- f:converter converterId="formatoFechaCortoConverter" / -->
												</h:outputText>
											</td>
											<td align="center">
												<h:outputText 
													value="#{estatusOpEfectivoBean.criterio.fechaLiberacion}"	>
												</h:outputText>
											</td>
																			
										</tr>
									
										
									</table>
								</td>
							</tr>
						</table>
					</div>
				</h:panelGroup>
			</h:panelGroup>
		</ui:define>
		<ui:define name="botones">
			<br />
			<h:panelGroup id="panelBotones">
				<div class="refrescar" style="float: left;">
					<a4j:status id="commonStatus">
						<f:facet name="start">
							<h:panelGroup>
								<h:graphicImage value="/images/ajax-loader.gif" />
								<h:outputText value="#{etq.buscando}"></h:outputText>
							</h:panelGroup>
						</f:facet>
					</a4j:status>
				</div>
				<div class="limpiar" style="float: right;">
					<h:commandButton type="image" value="Limpiar" styleClass="submit"
						actionListener="#{estatusOpEfectivoBean.limpiar}"
						image="/images/transparent.gif" alt="Limpiar" title="Limpiar" />
				</div>
				<div class="buscar" style="float: right;">
					<a4j:commandButton type="image" value="Buscar" id="botonBuscar"
						action="#{estatusOpEfectivoBean.buscarOperacionesEfectivoIntl}"
						styleClass="submit" 
						onclick="buscarRegistrosIntl();"
						oncomplete="if(#{estatusOpEfectivoBean.consultaEjecutada})presentarResumen();"
						reRender="panelBotones, panelResumen, panelResultados"
						image="/images/transparent.gif" alt="Buscar" title="Buscar" >
						<a4j:actionparam name="navCuentaiDebeBitacorear"  value="true" 
							assignTo="#{estatusOpEfectivoBean.debeDejarBitacora}" />
					</a4j:commandButton>
				</div>
				
				
				
				<div class="editar"
					style="display: #{ estatusOpEfectivoBean.consultaEjecutada ?'inline':'none'}"
					id="botonEditarCriterios">
					<input type="image" class="submit"
						src="#{facesContext.externalContext.requestContextPath}/images/transparent.gif"
						alt="Editar Criterios" title="Editar Criterios"
						onclick="setTimeout('presentarCriterios()',1000); return false;" />
				</div>
			</h:panelGroup>
		</ui:define>
		<ui:define name="seccionContenido">
			<table cellpadding="0" cellspacing="0" border="0" width="900px">
				<tr>
					<td width="900px">
						<h:panelGroup id="panelResultados">
							<h:inputHidden
								value="#{estatusOpEfectivoBean.paginacion.numeroPagina}" />
							<h:inputHidden
								value="#{estatusOpEfectivoBean.paginacion.totalResultados}" />
							<h:inputHidden
								value="#{estatusOpEfectivoBean.paginacion.totalPaginas}" />
							<div
								style="display: #{ estatusOpEfectivoBean . consultaEjecutada ? 'inline' : 'none'}">
								<table cellpadding="0" cellspacing="0" border="0" align="left"
									width="900px"
									style="display: #{ empty estatusOpEfectivoBean . resultadosIntl ? 'none' : 'inline'}">
									<tr>
										<td colspan="20">
											<img
												src="#{facesContext.externalContext.requestContextPath}/images/blank.gif"
												width="900px" height="0px" style="height: 1px" />
										</td>
									</tr>
									<tr>
										<td colspan="2">
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlPrimero ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_posicion_primero" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_primero.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlPrincipio" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retrocederRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_atras_fast" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras_fast.png"
														border="0" />
													<f:attribute name="navegacion"
														value="retrocederPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retroceder ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_atras" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras.png"
														border="0" />
													<f:attribute name="navegacion" value="retrocederPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzar ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_adelante" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzarRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_adelante_fast"
													reRender="panelResultados" onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante_fast.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlUltimo ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_ultimo" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_ultimo.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlUltimo" />
												</a4j:commandLink>
											</div>
										</td>
									</tr>
									<tr>
										<td width="450">
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.mostrandoPagina}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.abrir}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{estatusOpEfectivoBean.paginacion.numeroPagina}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.de}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{estatusOpEfectivoBean.paginacion.totalPaginas}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.entre}"></h:outputText>
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{estatusOpEfectivoBean.paginacion.totalResultados}"></h:outputText>
											&#160;
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.registrosEncontrados}" />
										</td>
										<td align="right" width="450">
											<h:outputText escape="false" styleClass="textoResumen"
												value="#{etq.registrosPorPagina}" />
											<h:selectOneMenu
												value="#{estatusOpEfectivoBean.paginacion.registrosPorPagina}"
												styleClass="">
												<f:selectItem itemValue="1" itemLabel="1" />
												<f:selectItem itemValue="5" itemLabel="5" />
												<f:selectItem itemValue="10" itemLabel="10" />
												<f:selectItem itemValue="20" itemLabel="20" />
												<f:selectItem itemValue="50" itemLabel="50" />
												<f:selectItem itemValue="100" itemLabel="100" />
												<a4j:support reRender="panelResultados" event="onchange"
													limitToList="true"
													action="#{estatusOpEfectivoBean.buscarOperacionesEfectivoIntl}"
													onchange="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);" >
													<a4j:actionparam name="navCuentaiDebeBitacorear"  value="false" 
														assignTo="#{estatusOpEfectivoBean.debeDejarBitacora}" />
												</a4j:support>
											</h:selectOneMenu>
											<h:inputHidden value="0" />
											<h:inputHidden value="0" />
											<h:inputHidden value="0" />
										</td>
									</tr>
								</table>
								<br />
								<table border="0" class="tablaGeneral" cellspacing="0px"
									width="900px"
									style="display: #{ empty estatusOpEfectivoBean . resultadosIntl ? 'inline' : 'none'}">
									<tr>
										<td colspan="20">
											<img
												src="#{facesContext.externalContext.requestContextPath}/images/blank.gif"
												width="900px" height="0px" style="height: 1px" />
										</td>
									</tr>
									<tr>
										<th class="tituloTabla" width="900px">
											<h:outputText value="#{etq.sinResultados}" />
										</th>
									</tr>
								</table>
								<table border="0" class="tablaGeneral" width="900px"
									cellspacing="0px"
									style="display: #{ empty estatusOpEfectivoBean . resultadosIntl ? 'none' : 'inline'}">
									<tr>
										<td colspan="20">
											<img
												src="#{facesContext.externalContext.requestContextPath}/images/blank.gif"
												width="900px" height="0px" style="height: 1px" />
										</td>
									</tr>
									
									
								
									<tr align="center">
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto"
												value="#{etq.traspasanteMinus} " />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.referenciaOperacion} " />
											&#160;
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto"
												value="#{etq.importe}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.divisa}"  />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.boveda}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto"
												value="#{etq.cuentaBeneficiario}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.concepto}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.fechaEnvio}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.fechaAutorizacion}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.fechaValor}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.fechaLiquidacion}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.fechaLiberacion}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.estatus}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.autorizar}" />
										</th>
										<th class="tituloTabla" style="text-align: center">
											<h:outputText styleClass="texto" value="#{etq.liberar}" />
										</th>
									</tr>							
									<t:dataList value="#{estatusOpEfectivoBean.resultadosIntl}"
										var="operacion" rowIndexVar="indice">
										<tr>
											<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText
													value="#{operacion.institucion.claveTipoInstitucion}#{operacion.institucion.folioInstitucion}"
													title="#{operacion.institucion.claveTipoInstitucion}#{operacion.institucion.folioInstitucion}" />
													
													
											</td>
											<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText
													value="#{operacion.referenciaOperacion}"
													title="#{operacion.referenciaOperacion}" />
											</td>
											<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.importeTraspaso}" />
												&#160;
											</td>
												<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.divisa.descripcion}" />
												&#160;
											
											</td>
												<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.boveda.nombreCorto}" />
												&#160;
											</td>
											
											<td nowrap="true"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.cuentaBeneficiarioFinal}" />
												&#160;
											</td>
											<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
											     <h:outputText value="#{operacion.conceptoPago}" >
													 
												</h:outputText>
											</td>
											<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
											     <h:outputText value="#{operacion.fechaEnvio}" >
													 
												</h:outputText>
											</td>
											<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
											     <h:outputText value="#{operacion.fechaAutorizacion}" >
													 
												</h:outputText>
											</td>
											<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
											     <h:outputText value="#{operacion.fechaValor}" >
													 
												</h:outputText>
											</td>
											<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.fechaLiquidacion}" >
													 
												</h:outputText>
											</td>
											<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.fechaLiberacion}" >
													 
												</h:outputText>
											</td>
												<td nowrap="true" align="right"
												class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:outputText value="#{operacion.estado.descripcion}" id="estado_descripcion" >
													 
												</h:outputText>
											</td>
											
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:panelGroup rendered="#{operacion.moduloOrigen == 'aprobacion' }">
												<div id="aprob_#{operacion.idRetiroEfectivoInt}" >
													<input id="chk_aprob_#{operacion.idRetiroEfectivoInt}"	type="checkbox"	onclick="javascript:agregaIntlAprobar('chk_aprob_#{operacion.idRetiroEfectivoInt}',false);" />																				
												
													<a4j:commandButton  title="Aprobar" ajaxSingle="true" image="/images/accept.png" 
														reRender="panelFirma" limitToList="true" 
														action="#{estatusOpEfectivoBean.accionAprobar}" 												
														oncomplete="#{empty '' ? 'deshabilitarIntlAprobar();':' '} window.scrollTo(0,0);"    
														onclick="removeAppletEfectivo();agregaIntlAprobar('chk_aprob_#{operacion.idRetiroEfectivoInt}',true)">
														<f:param name="firma" 		  value="#{!empty sessionScope.facultades['CON_CERTIFICADO']}"/>																																					 											 
													</a4j:commandButton>											
												</div>	
												</h:panelGroup >	
											</td>
											
											<td nowrap="true" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'}">
												<h:panelGroup rendered="#{operacion.moduloOrigen == 'liberacion'}">
												<div id="libe_#{operacion.idRetiroEfectivoInt}" >
												<input id="chk_libe_#{operacion.idRetiroEfectivoInt}"	type="checkbox"	onclick="javascript:agregaIntlLiberar('chk_libe_#{operacion.idRetiroEfectivoInt}',false);" />
												<a4j:commandButton  title="Liberar" ajaxSingle="true" 
												image="/images/accept.png" 	reRender="panelFirma" limitToList="true" 
												action="#{estatusOpEfectivoBean.accionLiberar}"												
												oncomplete="#{empty sessionScope.facultades['CON_CERTIFICADO'] ? 'deshabilitarIntlLiberar();':' '} window.scrollTo(0,0);"    
												onclick="removeAppletEfectivo();agregaIntlLiberar('chk_libe_#{operacion.idRetiroEfectivoInt}',true)">

												<f:param name="firma" 		  value="#{!empty sessionScope.facultades['CON_CERTIFICADO']}"/>																																																 											 
												</a4j:commandButton>											
												</div>	
												</h:panelGroup >	
											</td>
										</tr>
									</t:dataList>
									<tr>
										<td class="tituloTabla">
											&#160;
										</td>										
										<td class="tituloTabla">
											<h:outputText value="#{etq.totalMinus}" />
										</td>
										<td class="tituloTabla" nowrap="true" align="right"
											style="text-align: right">
											<h:outputText value="#{estatusOpEfectivoBean.totalImporte}"
												converter="formatoMonedaConverter" style="text-align: right" />
										</td>
										<td class="tituloTabla">
											&#160;
										</td>
										<td colspan="9" class="tituloTabla">
											&#160;
										</td>
									</tr>
								</table>
													
								<table cellpadding="0" cellspacing="0" border="0" align="left"
									width="900px">
									<tr>
										<td>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlPrimero ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_posicion_primero2" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_primero.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlPrincipio" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retrocederRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_atras_fast2"
													reRender="panelResultados" onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras_fast.png"
														border="0" />
													<f:attribute name="navegacion"
														value="retrocederPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . retroceder ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_atras2" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_atras.png"
														border="0" />
													<f:attribute name="navegacion" value="retrocederPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzar ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_adelante2" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPagina" />
												</a4j:commandLink>
											</div>
											<div
												style="display: #{ estatusOpEfectivoBean . paginacion . avanzarRapido ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_adelante_fast2"
													reRender="panelResultados" onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_adelante_fast.png"
														border="0" />
													<f:attribute name="navegacion" value="avanzarPaginasRapido" />
												</a4j:commandLink>
											</div>
											<div
											
												style="display: #{ estatusOpEfectivoBean . paginacion . irAlUltimo ? 'inline' : 'none'}">
												<a4j:commandLink
													actionListener="#{estatusOpEfectivoBean.navegarPorResultadosIntl}"
													id="control_consulta_ultimo2" reRender="panelResultados"
													onclick="buscarRegistrosIntl();"
													oncomplete="presentarResumen(); javascript:window.scrollTo(0,0);"
													limitToList="true">
													<img
														src="#{facesContext.externalContext.requestContextPath}/images/control_ultimo.png"
														border="0" />
													<f:attribute name="navegacion" value="irAlUltimo" />
												</a4j:commandLink>
											</div>
										</td>
										<td align="right">
											<div style="display: #{ not empty estatusOpEfectivoBean . resultadosIntl ? 'inline' : 'none'}">
												&#160;
												<h:commandButton
													style="display: #{!empty sessionScope.roles['INDEVAL'] ? 'inline' : 'none'}"
													actionListener="#{estatusOpEfectivoBean.generarReportesIntl}"
													action="estatusOpEfectivoIntlTxt" id="generarTxt"
													image="/images/TXT.gif"
													title="Exportar a Txt todos los resultados de la consulta"/>
												&#160;	
												<h:commandButton
													actionListener="#{estatusOpEfectivoBean.generarReportesIntl}"
													action="estatusOpEfectivoIntlXls" id="generarExcel"
													image="/images/excel-file.gif"
													title="Exportar a Excel todos los resultados de la consulta">

												</h:commandButton>
												&#160;
												<h:commandButton
													actionListener="#{estatusOpEfectivoBean.generarReportesIntl}"
													action="estatusOpEfectivoIntlPdf" id="generarPdf"
													image="/images/pdf.gif"
													title="Exportar a PDF todos los resultados de la consulta">


												</h:commandButton>

											</div>
										</td>
									</tr>
								</table>
							</div>
						</h:panelGroup>
						
						
						<!-- La facultad debe reflejar el valor de SeguridadConstants.FACULTAD_FIRMA_OPERACION -->
						<indeval:authorizeFaculty userInFaculty="CON_CERTIFICADO">
							<h:panelGroup id="panelFirma">								
								<h:panelGroup
									rendered="#{not empty estatusOpEfectivoBean.isosSinFirmar}">
								
																		
										<div style="display: none">
										
										<t:dataList value="#{estatusOpEfectivoBean.isosSinFirmar}"
											rowIndexVar="indice" var="iso">				
											<textarea id="isoSinFirmar#{indice+1}"
												name="isoSinFirmar#{indice+1}">#{estatusOpEfectivoBean.isosSinFirmar[indice]}												
											</textarea>				
											<textarea id="isoFirmado#{indice+1}"
												name="isoFirmado#{indice+1}"></textarea>				
											<textarea id="hashIso#{indice+1}" name="hashIso#{indice+1}">#{estatusOpEfectivoBean.hashIso[indice]}</textarea>				
											
											<textarea id="referenciaOperaciones#{indice+1}" name="referenciaOperaciones#{indice+1}">#{estatusOpEfectivoBean.referenciaOperaciones[indice]}</textarea>				
											<textarea id="referenciaMensajes#{indice+1}" name="referenciaMensajes#{indice+1}">#{estatusOpEfectivoBean.referenciaMensajes[indice]}</textarea>
											
										</t:dataList>
																			
										<textarea  id="numeroSerie" name="numeroSerie"></textarea>
										<textarea  id="numeroSerieUsuario" name="numeroSerieUsuario">#{sessionScope.usuario.numeroSerieCertificado}</textarea>										
										<textarea name="totalOperaciones"  id="totalOperaciones">#{estatusOpEfectivoBean.totalOperaciones}</textarea>
									</div>
				
						
						<script><!--
									function firmarOperacion(){
										var sonConfirmaciones= 'true'; //'{estatusOpEfectivoBean.confirmacion}';										   
										var idsConfirmar=null;
										var divItems=null;
																		   
										if(sonConfirmaciones.toLowerCase() == 'true'){
											idsConfirmar=document.getElementById('daliForm:intlIdOperacionesLiberar').value;
											var ids=idsConfirmar.split(',');		   
											divItems=document.getElementById('libe_'+ids[1]).childNodes;
										}else{
											idsConfirmar=document.getElementById('daliForm:intlIdOperacionesAprobar').value;
											var ids=idsConfirmar.split(',');
											 divItems=document.getElementById('aprob_'+ids[1]).childNodes;
										}	
										removeAppletEfectivo();		
										//alert("++++++before click");
										for(var j=0; j<divItems.length ; j++){
											divItems[j].click();			  				  								
										}									
										//divItems[1].click();
																													   	
									   if(sonConfirmaciones.toLowerCase() == 'true'){
										   deshabilitarIntlLiberar();		   
									   }else{
										   deshabilitarIntlAprobar();
									   }   										   	
									} 
																												
				                    --></script>
				                    <div id="firmaId">
									<ui:decorate template="/firmaDigitalMultiple.xhtml"></ui:decorate>
									</div>	
									
								</h:panelGroup>
							</h:panelGroup>
						</indeval:authorizeFaculty>		
						
						
						
						
					</td>
				</tr>
			</table>
		</ui:define>
	</ui:decorate>
	

	
</html>


