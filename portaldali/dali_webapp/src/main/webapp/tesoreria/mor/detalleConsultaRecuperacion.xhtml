<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:dt="http://blitzsoftware.com/jsf/datetag"
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xml:lang="es" lang="es">
	
	<ui:composition
		template="/layoutConsultas.xhtml">
		<ui:define name="tituloSeccion">
			<h:outputText value="#{etq.consultaRecuperacion}" />
		</ui:define>
		<ui:define name="subtituloSeccion">
			<h:outputText value="Detalle consulta recuperacion " />
		</ui:define>
		<ui:define name="head">
         
            <script language="javascript" type="text/javascript"
                src="#{facesContext.externalContext.requestContextPath}/js/mostrarPosiciones.js"></script>
            <script language="javascript" type="text/javascript"
                src="#{facesContext.externalContext.requestContextPath}/js/date.js"></script>
                <script language="javascript" type="text/javascript"
                src="#{facesContext.externalContext.requestContextPath}/js/estadoCuentaLiqDecretos.js"></script>
           
        </ui:define>
		
		<ui:define name="criterios">
			<a4j:keepAlive beanName="consultaRecuperacionesController" />
			<h:panelGroup id="panelCriterios" >
				<div id="divCriterios">
				<h:outputText value="#{consultaRecuperacionesController.detalleRecuperacion}"/>
				<table width="100%" border="0" cellpadding="0px" cellspacing="5px"
				     class="tablaCriterios texto" style="text-align: center">
						<tr>
							<td class="recuadroTabla">
								<table class="tablaCriterios" border="0"
									style="text-align: center">
									<tr>
										<td><h:outputText styleClass="texto" value="#{etq.tipoValor}" /></td>
										<td> <h:outputText styleClass="texto" value="#{etq.emisora}" /></td>
										<td> <h:outputText styleClass="texto" value="#{etq.serie}" /></td>
										<td> <h:outputText styleClass="texto" value="#{etq.cupon}" /> </td>
										
										<td> <h:outputText styleClass="texto" value="#{etq.moduloOrigen}" /> </td>
										<td> <h:outputText styleClass="texto" value="#{etq.tipoMovimiento}" /> </td>
										<td> <h:outputText styleClass="texto" value="#{etq.fechaLiquidacion}" /> </td>
										<td> <h:outputText styleClass="texto" value="#{etq.fechaCorte}" /> </td>
										<td> <h:outputText styleClass="texto" value="#{etq.fechaPago}" /> </td>
									</tr>
									<tr>
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.tv}"/> </td>
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.emisora}"/> </td>
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.serie}"/> </td>
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.cupon}"/> </td>
										
										
										<td> <h:outputText value="#{consultaRecuperacionesController.consultaRecuperacionDTO.idModuloOrigen == -1 ? 'TODAS' : consultaRecuperacionesController.descripcionModuloOrigen}"/> </td>
										<td> <h:outputText value="#{consultaRecuperacionesController.consultaRecuperacionDTO.idTipoMovimiento == -1 ? 'TODAS' : consultaRecuperacionesController.descripcionIdTipoMovimiento}" /> </td>
										
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.fechaLiquidacion}"/> </td>
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.fechaCorte}"/> </td>
										<td> <h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.fechaPago}"/> </td>
									</tr>	
								</table>
							</td>
						</tr>
					</table>
					
					<table class="tablaGeneral" width="900px"
									cellspacing="0px" style="display:#{empty consultaRecuperacionesController.recuperacionMorVo.tv?'none':'inLine'}" >
							<tr>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.traspasante}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.cuentaTraspasante}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.receptor}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.cuentaReceptor}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.referenciaOperacion}"/></th>
								
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.tipoValor}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.emisora}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.serie}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.cupon}"/></th>
										
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.importe}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.cantidadTit}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.moduloOrigen}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.tipoMovimiento}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.folioRecu}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.fechaMovimiento}"/></th>
								<th rowspan="1" colspan="1" class="tituloTabla wordWrap" ><h:outputText value="#{etq.estadoMovimiento}"/></th>
							</tr>
							
							<t:dataList id="tablaResultados"  rendered="#{not empty consultaRecuperacionesController.recuperacionMorVo.lstMovimientoMorVo}" 
							value="#{consultaRecuperacionesController.recuperacionMorVo.lstMovimientoMorVo}" 
							var="resultado" rowIndexVar="indice" >
							<tr>
								<td rowspan="1"  colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado"  width="150px">
											<h:outputText value="#{resultado.traspasante}" />
											 
								</td>
								<td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.cuentaTraspasante}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.receptor}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.cuentaReceptor}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.referenciaOperacion}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.tv}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.emisora}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.serie}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{consultaRecuperacionesController.recuperacionMorVo.cupon}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.importe}">
							   			<f:convertNumber pattern="'$'##,##0.00" />
							   		</h:outputText>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.cantidadTitulos}">
							   			<f:convertNumber pattern="#,##0" />
							   		</h:outputText>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.moduloOrigen}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.tipoMovimientoOrigen}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.folioRecuperacion}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							   		<h:outputText value="#{resultado.fechaMovimiento}"/>
							   </td>
							   <td rowspan="1" colspan="1" class="#{indice%2 == 0 ?'renglonTablaUno':'renglonTablaDos'} centrado" width="150px">
							    
							    	<!--  h:outputLink value="" title="#{resultado.descripcionError}" rendered="#{resultado.estadoMovimiento} == 'Liquidado'">
							   			<h:outputText value="#{resultado.estadoMovimiento}" />
							   		</h:outputLink-->
							   		<h:outputText value="#{resultado.estadoMovimiento}" title="#{resultado.descripcionError}"  />
							   		
							   </td>
						</tr>	
						</t:dataList>
				</table>
				</div>
			</h:panelGroup>
		</ui:define>
		
		
		<!-- paginacion -->
		<ui:define name="seccionContenido">
		<h:panelGroup id="exportarReportes" >
				<table  class="tablaExportar" width="900px">
					<tr align="right">
					 <td align="right">
									
					<h:commandButton 
						action="detalleConsultaRecuperacionXls" immediate="true" 
						image="/images/excel-file.gif"
						title="Exportar a Excel todos los resultados de la consulta"
						id="generarExcel" />									
					&#160;
					<h:commandButton 
						action="detalleConsultaRecuperacionPdf" 
						image="/images/pdf.gif"
						styleClass="submit"
						title="Exportar a PDF todos los resultados de la consulta" 														   
						id="generarPdf" />
						&#160;
						&#160;
									
				</td>
					</tr>
					<tr><td>
					<div class="regresar">
					
					
					<h:commandButton  
						action="consultaRecuperacion" 
						image="/images/transparent.gif"
						styleClass="submit"
						id="btnRegresar" 
						 />	
					
					</div>
					</td>
					</tr>
				</table>
			</h:panelGroup>
		</ui:define>
		
		
	</ui:composition>
</html>